<?php
 class SupermanHandUtil { public static function formatTime($timestamp, $suffix = '') { goto SpB4J; wtFB3: $format = floor($time_diff / 518400) . "\345\xb9\xb4" . $suffix; goto piXfC; piXfC: goto ZcamC; goto fthbE; cwCt0: $format = floor($time_diff / 1440) . "\345\244\251" . $suffix; goto MuxC6; k3hfs: if ($time_diff > 1 && $time_diff < 60) { goto ASecq; } goto Qf8MX; MZoiL: goto mrIUK; goto nT5UZ; Qf8MX: if ($time_diff >= 60 && $time_diff < 1440) { goto ZZtxc; } goto D0tw9; tKjRJ: $format = floor($time_diff) . "\xe5\210\206\xe9\222\237" . $suffix; goto iPXdu; SpB4J: $time_diff = (TIMESTAMP - $timestamp) / 60; goto P1WDT; z8ms4: znHSd: goto cwCt0; v_8vS: goto ggipv; goto VB8SW; iPXdu: bXnKl: goto v_8vS; VB8SW: wahao: goto HtnH6; nT5UZ: ZZtxc: goto VcEft; vlQwq: ggipv: goto H0XZR; VcEft: $format = floor($time_diff / 60) . "\xe5\260\x8f\346\x97\266" . $suffix; goto GbENJ; z7UkW: goto ZpLuz; goto z8ms4; D0tw9: if ($time_diff >= 1440 && $time_diff < 43200) { goto znHSd; } goto By5U1; fthbE: pumVn: goto FLvSQ; P1WDT: if ($time_diff <= 1) { goto wahao; } goto k3hfs; MuxC6: ZpLuz: goto MZoiL; HtnH6: $format = "\345\210\232\345\x88\232"; goto vlQwq; By5U1: if ($time_diff >= 43200 && $time_diff < 518400) { goto pumVn; } goto wtFB3; H0XZR: return $format; goto GYG1U; EHHEn: ASecq: goto tKjRJ; GbENJ: mrIUK: goto Ldf8f; Ldf8f: goto bXnKl; goto EHHEn; FLvSQ: $format = floor($time_diff / 43200) . "\xe6\234\210" . $suffix; goto n0Q0e; n0Q0e: ZcamC: goto z7UkW; GYG1U: } public static function order_status_title($status = null) { goto GXdG7; MwACW: rNCpz: goto hMuHJ; oaIJi: if (!($status !== null && isset($all_status[$status]))) { goto rNCpz; } goto A1avR; A1avR: return $all_status[$status]; goto MwACW; hMuHJ: return $all_status; goto CXO3q; GXdG7: $all_status = array("\55\63" => "\xe5\267\xb2\351\x80\200\346\254\276", "\55\x32" => "\xe5\267\262\345\x88\240\351\231\xa4", "\55\61" => "\xe5\xbe\x85\351\200\x80\xe6\254\276", "\x30" => "\345\276\205\346\224\xaf\344\273\230", "\x31" => "\345\xbe\205\345\x8f\x91\xe8\264\xa7", "\x32" => "\xe5\xb7\262\xe5\x8f\x91\350\xb4\247", "\x33" => "\xe5\xb7\262\346\x94\266\350\xb4\247", "\x34" => "\345\xb7\262\xe5\xae\x8c\346\210\x90"); goto oaIJi; CXO3q: } public static function get_getcash_status_title($status) { goto Ua7cV; lHuqU: BVwcZ: goto WUMwJ; WUMwJ: RGcJ8: goto OY6t7; Ua7cV: switch ($status) { case -1: return "\xe6\x8f\x90\347\216\xb0\xe5\xa4\261\xe8\xb4\xa5"; goto RGcJ8; case 0: return "\xe6\x9c\xaa\xe6\224\257\xe4\273\x98"; goto RGcJ8; case 1: return "\345\xb7\262\xe6\x94\xaf\344\273\230"; goto RGcJ8; default: return "\x75\156\x6b\156\x6f\167\156"; goto RGcJ8; } goto lHuqU; OY6t7: } public static function pay_item_expiretime($num, $time = 0) { goto wTlpw; hU37n: return $time > 0 ? strtotime($pay_date . "\40\53" . $num . "\40\144\141\171") : strtotime("\x2b{$num}\x20\144\x61\171"); goto OVNzv; OVNzv: N1mNb: goto XjLu3; p0juY: return $time > 0 ? strtotime($pay_date . "\x20\53" . $hour . "\40\x68\x6f\x75\x72") : strtotime("\53{$hour}\x20\150\157\x75\x72"); goto yxkJG; wTlpw: $pay_date = date("\131\x2d\x6d\55\144\x20\x48\72\151\x3a\x73", $time); goto SahPS; fVPx8: $hour = ceil($num * 24); goto p0juY; EM7e5: Rbx1k: goto hU37n; yxkJG: goto N1mNb; goto EM7e5; SahPS: if ($num > 1) { goto Rbx1k; } goto fVPx8; XjLu3: } public static function hide_mobile($mobile) { return !empty($mobile) ? preg_replace("\x2f\50\134\144\x7b\63\175\51\50\x5c\144\x7b\x34\x7d\51\x2f", "\x24\61\52\52\x2a\x2a", $mobile) : ''; } public static function json($errno, $errmsg = '', $data = array()) { goto DFfsI; od4ZS: CRH4A: goto FQQfN; DFfsI: ob_end_clean(); goto D2Ws5; FQQfN: $result = array("\x65\162\162\x6e\x6f" => $errno, "\145\x72\162\155\x73\x67" => $errmsg, "\x64\141\x74\x61" => $data); goto SSt5g; PjvTj: exit(json_encode($result)); goto maeHs; SSt5g: @header("\x43\157\156\164\x65\156\164\55\124\x79\x70\x65\72\x20\x61\160\160\x6c\x69\x63\141\x74\151\x6f\x6e\x2f\152\163\x6f\x6e\x3b\x20\x63\x68\141\162\x73\145\x74\75\x75\164\146\x2d\x38"); goto PjvTj; elbB8: $errmsg = SupermanHandErrno::$ERRMSG[$errno]; goto od4ZS; D2Ws5: if (!($errmsg == '')) { goto CRH4A; } goto elbB8; maeHs: } public static function set_resource(&$res) { goto oEl40; wg8OS: $res["\143\163\x73"] = "\74\154\151\156\x6b\x20\162\145\154\x3d\42\x73\164\171\154\x65\x73\x68\x65\145\164\x22\40\150\162\145\146\75\x22" . MODULE_URL . "\164\x65\155\160\x6c\x61\x74\x65\x2f\x6d\157\142\151\154\145\57\x63\141\143\150\145\x2f\x63\163\163\56\143\163\163\x3f" . SUPERMAN_HAND2_VERSION . "\x22\x3e"; goto uLrgQ; D4mYR: $res["\143\157\155\155\x6f\x6e\137\x6a\x73"] = "\x3c\x73\143\x72\x69\x70\164\x20\163\x72\143\x3d\42" . MODULE_URL . "\155\x69\156\x2f\x69\156\144\145\x78\56\x70\150\x70\77\147\x3d\x63\x6f\155\x6d\157\156\55\152\x73\46" . SUPERMAN_HAND2_VERSION . "\42\40\143\x68\141\162\163\x65\x74\x3d\x22\165\164\146\x2d\x38\x22\x3e\74\x2f\x73\143\162\x69\160\164\76"; goto t0dhE; JMQjW: TH_iE: goto sYWuZ; OuzKu: if (defined("\114\x4f\x43\x41\x4c\137\x44\x45\126\105\114\x4f\x50\115\x45\x4e\x54")) { goto fsxD8; } goto duueS; ZIw0A: C11r9: goto zdqPj; hF7Iv: $res["\152\x73"] = ''; goto PTr9G; HEQf6: if (defined("\111\x4e\x5f\x4d\x4f\102\111\114\x45")) { goto C11r9; } goto ZKeyA; we_yt: goto TH_iE; goto UTgwu; ZKeyA: if (!defined("\111\x4e\137\123\x59\x53")) { goto De6BS; } goto blVQH; N_5C9: $res["\x6d\141\x69\x6e\x5f\152\x73"] = "\x3c\x73\143\162\151\160\164\x20\x73\162\143\75\x22" . MODULE_URL . "\x6d\151\156\x2f\151\156\144\145\x78\56\160\150\160\77\147\x3d\x6d\141\151\x6e\x2d\152\163\46\144\x65\142\165\147\75\x31\46" . SUPERMAN_HAND2_VERSION . "\x22\40\x63\150\x61\162\x73\x65\164\x3d\x22\165\164\x66\55\x38\x22\x3e\x3c\57\x73\143\162\x69\160\x74\x3e"; goto JMQjW; xczwy: $res["\143\x73\x73"] = ''; goto hF7Iv; wfpoT: $res["\x63\x6f\155\x6d\157\x6e\x5f\x6a\x73"] = "\74\163\143\162\151\x70\x74\x20\163\162\x63\75\x22" . MODULE_URL . "\x6d\x69\156\x2f\151\x6e\x64\145\170\56\x70\150\160\x3f\x67\x3d\143\157\x6d\x6d\x6f\156\x2d\x6a\x73\x26\x64\145\x62\165\x67\75\x31\46" . SUPERMAN_HAND2_VERSION . "\x22\40\143\x68\141\x72\x73\145\164\75\x22\165\164\146\x2d\x38\x22\x3e\74\x2f\x73\x63\x72\151\160\164\76"; goto N_5C9; u89p7: $res["\x6d\141\x69\x6e\x5f\152\x73"] = "\74\x73\x63\x72\151\160\164\x20\163\x72\143\x3d\42" . MODULE_URL . "\x74\x65\155\x70\154\x61\x74\x65\57\x6d\157\142\x69\x6c\x65\57\143\x61\143\150\x65\57\x6d\x61\151\156\x2e\152\163\77" . SUPERMAN_HAND2_VERSION . "\x22\x20\143\x68\141\162\163\145\164\75\x22\165\x74\146\x2d\x38\42\x3e\74\57\163\x63\x72\x69\x70\x74\76"; goto abG7A; rsrog: goto y3Ql5; goto AOUU4; blVQH: $module = "\167\x65\142"; goto NeHkM; oN1w0: $js = array(); goto mIwCE; oEl40: global $_GPC; goto gtrmd; uLrgQ: $res["\143\157\x6d\155\x6f\x6e\x5f\x6a\x73"] = "\74\163\x63\162\151\x70\x74\x20\163\x72\x63\75\42" . MODULE_URL . "\164\x65\155\160\x6c\141\x74\x65\57\155\157\x62\151\154\x65\x2f\143\x61\x63\150\145\x2f\x63\x6f\155\x6d\x6f\x6e\x2e\152\163\x3f" . SUPERMAN_HAND2_VERSION . "\42\40\x63\150\141\162\163\x65\x74\75\42\165\164\146\55\70\42\76\x3c\x2f\x73\143\162\151\160\164\x3e"; goto u89p7; PTr9G: $module = ''; goto HEQf6; mIwCE: $do = $_GPC["\144\157"]; goto rVEE0; zdqPj: $module = "\155\157\x62\x69\x6c\x65"; goto hvDwy; abG7A: y3Ql5: goto we_yt; i921u: goto xj84n; goto ZIw0A; forlT: $res["\143\163\x73"] = "\x3c\154\151\156\153\40\x72\x65\154\x3d\42\163\164\171\x6c\145\163\150\x65\145\x74\x22\x20\150\x72\x65\146\75\x22" . MODULE_URL . "\x6d\x69\x6e\x2f\151\156\x64\145\170\x2e\x70\x68\x70\77\x67\75\143\x73\163\46" . SUPERMAN_HAND2_VERSION . "\42\x3e"; goto D4mYR; AOUU4: fIV94: goto wg8OS; t0dhE: $res["\x6d\x61\151\x6e\x5f\152\x73"] = "\74\163\143\x72\151\160\164\40\x73\x72\143\x3d\x22" . MODULE_URL . "\x6d\151\156\57\x69\x6e\144\145\170\56\x70\x68\160\x3f\x67\x3d\155\141\151\156\55\152\x73\46" . SUPERMAN_HAND2_VERSION . "\x22\40\143\x68\x61\162\x73\145\x74\75\x22\165\x74\146\x2d\70\42\76\74\57\163\x63\162\x69\160\164\x3e"; goto rsrog; sYWuZ: return $res; goto khWY3; gtrmd: $css = array(); goto oN1w0; I6R8L: $res["\143\163\163"] = "\x3c\x6c\x69\156\153\x20\162\145\154\x3d\x22\x73\164\171\x6c\x65\163\150\x65\x65\164\42\x20\150\162\145\x66\75\x22" . MODULE_URL . "\x6d\151\156\57\151\x6e\x64\145\170\56\160\x68\160\77\147\75\x63\x73\x73\x26\144\145\x62\x75\147\x3d\61\x26" . SUPERMAN_HAND2_VERSION . "\42\x3e"; goto wfpoT; hvDwy: xj84n: goto OuzKu; NeHkM: De6BS: goto i921u; rVEE0: $act = $_GPC["\141\x63\x74"] ? $_GPC["\141\143\164"] : "\x64\151\x73\x70\154\x61\171"; goto xczwy; duueS: if (file_exists(MODULE_ROOT . "\x2f\164\x65\x6d\x70\154\x61\164\145\x2f\155\157\x62\151\x6c\x65\x2f\143\x61\143\150\x65\57\143\x73\163\56\x63\163\x73") && !defined("\117\116\114\x49\x4e\105\x5f\104\105\126\x45\x4c\x4f\x50\x4d\x45\x4e\124")) { goto fIV94; } goto forlT; UTgwu: fsxD8: goto I6R8L; khWY3: } public static function background_running($module) { goto t81Wj; zgkIZ: $filter = array("\165\x6e\151\141\x63\151\144" => $_W["\165\x6e\x69\141\x63\151\144"], "\163\164\x61\164\x75\x73" => 2, "\x73\145\156\144\164\x69\x6d\145\x20\76" => 0, "\x73\x65\156\144\164\x69\x6d\145\x20\74" => TIMESTAMP - 3600 * 24 * $day, "\163\x65\164\164\154\145\x6d\145\156\164\x5f\163\164\141\x74\x75\x73" => 0); goto hAwwu; ZGPXs: WeUtility::logging("\x77\x61\x72\x6e\151\156\147", "\133\165\164\x69\154\56\x63\x6c\x61\163\x73\56\160\150\160\54\x20\x68\x61\x6e\x64\x32\x5f\162\145\x70\x6f\x72\x74\135\40\162\145\163\x75\x6c\x74\75" . var_export($result, true)); goto x70xo; bxSY2: $filter = array("\165\x6e\151\141\143\x69\x64" => $_W["\165\x6e\151\x61\143\151\x64"], "\x64\x61\x79\164\x69\x6d\145\40\76\75" => date("\x59\155\x64", strtotime("\55\61\40\x64\141\x79"))); goto lHaks; hAwwu: $orders = pdo_getall("\x73\x75\x70\145\162\x6d\141\x6e\137\x68\141\x6e\x64\62\x5f\x6f\x72\x64\145\x72", $filter); goto M2f3u; qNCvq: if (!$ask_item) { goto oZlqB; } goto RC0JB; Mwnnp: file_put_contents($path . "\x2f\x6c\157\x63\141\x74\x69\x6f\156\x5f\x74\162\141\156\163\151\x74\151\157\156\56\164\x78\164", ''); goto LYaI3; YyyyD: $wxapp_interval = self::check_running_interval_time($path . "\57\x68\x61\156\x64\x6c\145\137\x74\x70\154\155\x73\x67\x2e\164\170\x74"); goto QdDr7; EP1v3: qJnBY: goto Koj1m; lOPLs: $members = pdo_getall("\163\165\160\x65\162\155\141\x6e\137\x68\141\156\144\62\x5f\x6d\145\155\142\145\x72\137\154\157\147\151\x6e", array("\165\x6e\x69\x61\143\151\144" => $_W["\165\156\151\141\143\151\144"])); goto jWwT9; lYYf2: if (!($plugin_module["\x70\x6c\165\147\x69\x6e\x5f\156\157\x74\151\143\145"]["\x6d\157\144\x75\x6c\145"] && !$plugin_module["\x70\x6c\165\147\x69\156\x5f\x6e\x6f\x74\x69\x63\x65"]["\155\157\144\165\154\145"]["\x69\163\x5f\x64\145\154\x65\x74\145"])) { goto wAHSf; } goto FN5sC; C7gDd: wkSOx: goto qbu4L; x70xo: sd9dX: goto htloI; jWwT9: if (empty($members)) { goto A053q; } goto KQl2d; QdDr7: if (!$wxapp_interval) { goto NcBsI; } goto wRi0X; zexyU: foreach ($list as $li) { goto QWoTL; ZD1T2: if (!($ret === false)) { goto bCcHG; } goto XagU1; QWoTL: if (!($li["\x70\162\x6f\x76\x69\x6e\x63\x65"] && $li["\143\x69\x74\171"])) { goto regYS; } goto Zf15J; g5yH7: regYS: goto gT_Nq; gT_Nq: $location = SupermanHandUtil::location_transition($li["\x6c\141\x74"], $li["\x6c\x6e\147"], $module["\x63\x6f\156\146\151\147"]["\x62\x61\x73\x65"]["\154\142\163\137\153\145\x79"]); goto vHX4a; sItmC: bCcHG: goto pbCxq; pbCxq: TE0xO: goto XrMfE; vHX4a: $ret = pdo_update("\163\x75\x70\145\162\x6d\141\x6e\x5f\150\141\x6e\144\x32\x5f\x69\164\x65\x6d", array("\x70\x72\x6f\x76\151\156\143\x65" => $location["\160\x72\x6f\x76\151\156\x63\x65"], "\x63\x69\x74\x79" => $location["\x63\151\164\171"]), array("\165\x6e\x69\x61\x63\x69\x64" => $_W["\x75\x6e\x69\x61\x63\151\144"], "\x69\x64" => $li["\151\x64"])); goto ZD1T2; XagU1: goto cszVx; goto sItmC; Zf15J: goto TE0xO; goto g5yH7; XrMfE: } goto rWq7N; kYlLY: mkdirs($path); goto r6NwX; g0qsY: $list = pdo_getall("\x73\x75\160\x65\162\x6d\141\x6e\137\150\x61\156\x64\62\137\x69\164\145\x6d", array("\165\x6e\x69\141\143\x69\144" => $_W["\x75\x6e\151\141\143\151\x64"], "\163\164\141\164\165\163\40\x3e\75" => 0)); goto VRdOE; Xg7Fa: if (!$ret) { goto eD6h4; } goto lYYf2; KQl2d: foreach ($members as $member) { goto p2JEy; yfhjJ: JIRt9: goto Wxld2; ZVrUx: $message_data = array("\x66\151\162\163\x74" => array("\166\141\154\x75\145" => "\xe4\272\xb2\357\xbc\x8c\345\245\xbd\344\xb9\205\344\270\x8d\xe8\xa7\201\344\xba\x86", "\143\x6f\154\157\162" => "\43\x31\67\x33\x31\x37\67"), "\153\x65\171\x77\x6f\x72\x64\x31" => array("\x76\141\154\x75\145" => $user["\x6e\x69\143\153\156\141\x6d\x65"]), "\153\145\171\167\x6f\162\x64\x32" => array("\166\141\x6c\x75\x65" => $module["\143\157\x6e\146\151\x67"]["\x62\x61\163\x65"]["\x74\x69\x74\154\145"]), "\153\145\171\x77\157\162\x64\63" => array("\166\x61\x6c\165\145" => SupermanHandUtil::formatTime($member["\x64\x61\x74\x65\154\151\x6e\x65"])), "\162\x65\155\141\x72\x6b" => array("\166\141\x6c\x75\x65" => "\xe6\x88\x91\344\xbb\xac\xe5\217\x88\346\233\264\xe6\x96\260\344\xba\206\344\270\x80\345\xa4\247\346\x89\xb9\345\x8a\x9f\xe8\203\275\xe5\222\x8c\xe7\x89\251\345\x93\201\xef\xbc\214\xe8\265\xb6\xe5\xbf\xab\347\x82\271\xe8\xbf\x9b\346\235\xa5\347\x9c\213\344\xb8\200\344\xb8\213\345\x90\xa7\xef\xbc\x81", "\x63\x6f\154\x6f\162" => "\43\61\x37\x33\x31\x37\67")); goto H84Bu; WPrdB: $user = pdo_get("\155\143\137\155\x65\155\x62\145\x72\163", array("\x75\x69\x64" => $member["\165\151\144"]), array("\x6e\x69\143\153\x6e\141\x6d\x65")); goto ZVrUx; Wxld2: LJNLh: goto pJbcc; p2JEy: if (!($member["\144\141\164\x65\x6c\x69\156\x65"] + $days_mils <= TIMESTAMP && $member["\165\151\x64"] > 0)) { goto JIRt9; } goto E0iQT; E0iQT: $openid = SupermanHandUtil::uid2openid($member["\165\x69\x64"]); goto WPrdB; H84Bu: SupermanHandUtil::send_uniform_msg($message_data, $openid, $expire_tplid, $gzh_appid); goto yfhjJ; pJbcc: } goto Qo8PS; M2f3u: if (empty($orders)) { goto Jx93s; } goto JCbvq; Koj1m: oZlqB: goto FBVeN; wRi0X: $days = $module["\143\x6f\156\x66\151\147"]["\x6d\151\156\x69\160\147"]["\x6c\157\147\x6f\x75\x74"]["\x64\x61\x79\163"] ? intval($module["\x63\x6f\x6e\146\x69\x67"]["\155\151\156\x69\160\147"]["\154\157\147\157\x75\x74"]["\x64\x61\x79\x73"]) : 7; goto yKDtE; NPMLa: u4n2f: goto Mwnnp; qbu4L: $plugin_module = SupermanHandUtil::_init_plugin_module($module); goto Y4JY2; VRdOE: if (!$list) { goto u4n2f; } goto zexyU; KMMGy: $result = $cloud->hand2_report($stat); goto fQXNX; IG6xB: $expire_tplid = $module["\143\157\156\x66\x69\147"]["\155\151\156\x69\x70\147"]["\x77\x78\141\160\x70\137\145\170\160\151\162\x65"]["\x74\x6d\160\154\x5f\151\x64"]; goto IR9zl; JCbvq: foreach ($orders as $li) { goto Fb9Hr; TVq82: WeUtility::logging("\146\141\x74\141\x6c", "\133\x6f\162\x64\x65\x72\x2e\151\156\143\x2e\x70\150\160\x3a\x20\x70\x6f\163\x74\135\x20\165\160\144\x61\x74\145\x20\163\x65\154\154\145\x72\x5f\x75\151\x64\40\143\162\145\x64\151\164\40\146\141\151\154\135\x2c\40\162\x65\164\x31\x3d" . var_export($ret1, true)); goto ZNlg0; Kampj: if (!is_error($ret2)) { goto OLgQ1; } goto Vi2ev; SdfeA: pdo_update("\x73\165\x70\x65\x72\x6d\141\x6e\x5f\150\141\156\144\62\x5f\157\x72\144\x65\162", array("\163\145\164\x74\x6c\145\155\x65\156\164\137\x73\164\x61\x74\x75\163" => 1, "\x73\x74\x61\164\165\x73" => 3), array("\x69\144" => $li["\x69\x64"])); goto FU_LS; Fb9Hr: if ($li["\x70\x61\171\164\171\x70\145"] == 1) { goto GPohm; } goto Nzgsg; rTMna: OLgQ1: goto iurrT; eLMtG: $ret2 = pdo_update("\163\x75\160\x65\x72\x6d\141\156\x5f\x68\x61\156\x64\62\137\157\162\x64\x65\x72", array("\x73\x65\164\x74\x6c\145\x6d\x65\156\164\137\163\164\x61\164\x75\163" => 1, "\x73\x74\141\x74\165\x73" => 3), array("\x69\144" => $li["\x69\x64"])); goto m6iyL; jgc0i: fiLVX: goto cB5c5; MJVNF: pdo_insert("\x73\165\x70\x65\162\x6d\141\x6e\137\x68\141\156\x64\62\137\x6d\145\x6d\x62\x65\162\137\155\x6f\156\x65\171\137\154\x6f\147", $log); goto x4d6U; k14z7: pR1M7: goto HXHBj; FD00A: WeUtility::logging("\x66\141\x74\141\x6c", "\40\157\162\144\x65\162\56\151\156\143\x2e\x70\x68\x70\x2c\40\157\x72\144\145\x72\40\x73\x65\164\164\x6c\145\155\145\x6e\x74\x20\x66\141\151\x6c\145\x64\x2c\40\162\145\164\61\x3d" . var_export($ret1, true) . "\54\40\x72\x65\164\62\75" . var_export($ret2, true) . "\x2c\x20\157\162\144\x65\x72\75" . var_export($li, true)); goto KV1Wm; x4d6U: $new_id = pdo_insertid(); goto q_9_h; s4hG5: GPohm: goto igD33; ZNlg0: LfKgT: goto cGUjE; CAcLB: $ret2 = mc_credit_update($li["\142\x75\x79\145\162\137\x75\x69\144"], "\x63\162\x65\x64\151\x74\61", -$li["\143\x72\x65\144\151\164"], $credit_log); goto Kampj; q_9_h: if (!empty($new_id)) { goto pR1M7; } goto RgzNX; cGUjE: $credit_log = array($li["\142\x75\x79\145\162\x5f\165\151\x64"], "\xe5\205\x91\346\215\242" . $item["\164\x69\x74\154\145"] . "\347\211\251\345\223\x81", "\x73\x75\160\x65\x72\x6d\141\156\137\x68\x61\x6e\x64\62"); goto CAcLB; SdwZc: if (!is_error($ret1)) { goto LfKgT; } goto TVq82; m6iyL: if (!($ret1 === false || $ret2 === false)) { goto ZYEDr; } goto FD00A; OLGKM: $credit_log = array($item["\x73\x65\x6c\x6c\145\162\x5f\x75\151\144"], "\xe5\x8d\226\xe5\207\272\xe7\x89\251\xe5\223\x81" . $item["\x74\x69\164\x6c\x65"], "\163\x75\160\x65\x72\x6d\x61\156\x5f\x68\x61\x6e\144\62"); goto JTvZF; Vi2ev: WeUtility::logging("\146\x61\164\141\154", "\133\x6f\x72\x64\x65\x72\56\x69\x6e\x63\x2e\160\x68\160\72\x20\x70\157\163\x74\135\x20\x75\x70\x64\x61\164\x65\x20\142\165\x79\x65\162\137\165\x69\144\x20\x63\x72\x65\x64\151\x74\x20\x66\x61\x69\154\135\x2c\40\x72\145\x74\62\x3d" . var_export($ret2, true)); goto rTMna; xh8ct: $log = array("\x75\x6e\x69\141\143\151\144" => $_W["\x75\156\151\x61\143\x69\144"], "\165\x69\144" => $li["\163\145\x6c\x6c\x65\x72\x5f\x75\x69\x64"], "\x74\171\x70\145" => 1, "\155\x6f\x6e\x65\171" => $li["\160\x72\x69\143\145"], "\x6f\x70\x65\162\x61\x74\157\162" => "\347\263\273\xe7\273\237", "\x72\145\x6d\141\x72\153" => "\347\263\xbb\xe7\273\237\347\xbb\223\xe7\xae\x97\357\xbc\x9a\350\256\xa2\xe5\x8d\x95\345\217\267\75" . $li["\x6f\162\144\145\162\163\x6e"], "\x63\x72\145\141\164\x65\x74\151\x6d\145" => TIMESTAMP); goto MJVNF; Nzgsg: $ret1 = pdo_update("\163\165\x70\145\162\155\141\x6e\137\150\x61\x6e\x64\62\x5f\x6d\x65\x6d\142\x65\162", array("\142\x61\154\x61\156\x63\x65\x20\53\x3d" => $li["\x70\x72\x69\143\x65"], "\165\x70\x64\141\164\145\164\151\155\145" => TIMESTAMP), array("\165\x6e\151\141\143\x69\x64" => $_W["\x75\156\151\141\x63\151\144"], "\165\151\144" => $li["\x73\x65\154\154\x65\x72\x5f\165\151\144"])); goto eLMtG; FU_LS: xfFBn: goto jgc0i; KV1Wm: ZYEDr: goto xh8ct; iurrT: pdo_delete("\163\165\x70\145\x72\x6d\141\x6e\x5f\x68\x61\156\x64\62\x5f\x6d\145\x6d\x62\x65\x72\x5f\x62\x6c\157\x63\x6b\x5f\143\162\x65\144\x69\164", array("\165\x6e\151\141\x63\151\x64" => $_W["\165\156\x69\x61\143\x69\144"], "\x75\x69\x64" => $li["\x62\x75\171\x65\x72\x5f\x75\151\144"], "\151\164\145\x6d\151\x64" => $li["\151\x74\145\155\151\x64"])); goto SdfeA; RgzNX: WeUtility::logging("\x66\141\x74\x61\x6c", "\40\157\x72\x64\145\162\56\x69\x6e\x63\56\x70\150\x70\54\x20\x6f\x72\144\145\x72\x20\x73\x65\164\x74\154\x65\x6d\145\x6e\x74\x20\x66\x61\x69\x6c\145\x64\x2c\x20\x6c\x6f\147\x3d" . var_export($log, true) . "\54\x20\157\162\144\145\x72\75" . var_export($li, true)); goto k14z7; JTvZF: $ret1 = mc_credit_update($item["\163\x65\x6c\x6c\x65\162\137\165\151\144"], "\143\162\145\144\x69\164\61", $li["\x63\x72\145\x64\151\164"], $credit_log); goto SdwZc; HXHBj: goto xfFBn; goto s4hG5; igD33: $item = pdo_get("\x73\165\x70\145\162\x6d\141\x6e\137\x68\x61\156\x64\62\137\151\164\x65\155", array("\165\x6e\151\141\143\151\144" => $_W["\165\156\x69\x61\x63\151\x64"], "\151\144" => $li["\151\x74\145\x6d\151\x64"])); goto OLGKM; cB5c5: } goto iYtgZ; t81Wj: global $_W; goto PHLZh; htloI: k1SWU: goto C_NK4; KpuKR: if (empty($stat)) { goto k1SWU; } goto LL3N1; J5rO1: $notice_run_time = $notice_config["\x74\155\x70\x6c"]["\162\x75\x6e\x5f\x74\151\x6d\x65"] ? $notice_config["\164\155\x70\154"]["\x72\165\x6e\137\164\x69\155\x65"] : 5; goto eI9qb; abTKZ: eD6h4: goto gOz3o; PHLZh: $path = MODULE_ROOT . "\57\x64\141\164\141\x2f" . $_W["\x75\156\x69\x61\x63\x69\144"]; goto kYlLY; C_NK4: IarG4: goto qIhlE; c_WXR: A053q: goto rY6pz; FN5sC: $ask_item = pdo_getall("\x73\165\x70\x65\x72\x6d\141\156\x5f\150\x61\x6e\x64\x32\137\x61\163\x6b\x5f\x69\164\x65\x6d", array("\x75\156\151\x61\x63\x69\144" => $_W["\x75\x6e\151\x61\x63\x69\144"], "\x73\x65\x6e\144\137\164\x6d\x70\154" => 0, "\x73\x74\141\164\x75\163" => 0)); goto qNCvq; eI9qb: $ret = self::check_running_interval_time($path . "\57\x70\x6c\x75\x67\151\156\x5f\x6e\x6f\x74\x69\143\145\x2e\x74\x78\x74", $notice_run_time * 60); goto Xg7Fa; iYtgZ: LcJ6O: goto TGuyv; LYaI3: BgBpV: goto K1ND1; LL3N1: $cloud = new SupermanHandCloud($module); goto KMMGy; Yrr9j: if (!($expire_tplid && $gzh_appid)) { goto wkSOx; } goto YyyyD; rY6pz: NcBsI: goto C7gDd; qIhlE: $ret = self::check_running_interval_time($path . "\x2f\x77\x65\143\150\x61\164\x5f\163\x65\164\164\154\145\155\145\156\164\56\x74\x78\164", 300); goto fOgoB; RC0JB: foreach ($ask_item as $ai) { goto PacnX; ZXL4S: if (!(count($msg_data) > 0)) { goto yAdJb; } goto moOiN; rTKWt: $params = array("\x3a\165\156\x69\141\143\151\x64" => $_W["\x75\156\151\x61\x63\151\144"], "\x3a\x73\164\141\164\165\163" => 1, "\x3a\x6c\x61\164" => $ai["\x6c\x61\x74"], "\72\x6c\156\x67" => $ai["\x6c\x6e\147"]); goto yvjoX; g9WoN: Goucl: goto BXu4I; neVXU: v0IPW: goto ZXL4S; LEJ5X: $openid = SupermanHandUtil::uid2openid($ai["\x75\151\x64"]); goto PjBW6; B5yZX: if (!(count($msg_data) > 0)) { goto Goucl; } goto OI0wq; Bnl4s: if (!(!empty($openid) && !empty($tpl_id))) { goto iHINq; } goto AHb9k; GHp0q: $sql .= "\x20\x57\110\x45\x52\105\x20\165\156\x69\141\143\x69\144\75\72\x75\x6e\x69\141\x63\151\144\x20\101\x4e\104\x20\x73\x74\x61\164\165\x73\x3d\x3a\x73\164\x61\164\165\163\40\x41\116\104\40\144\x69\163\164\x61\156\143\x65\40\x3c\75{$ai["\x64\151\163\164\x61\x6e\x63\x65"]}"; goto H1SJd; odEnG: pdo_update("\163\x75\160\145\162\x6d\141\156\137\x68\x61\156\144\62\x5f\141\163\x6b\137\151\x74\145\155", array("\163\x65\156\x64\137\164\x6d\x70\154" => 1), array("\151\144" => $ai["\151\144"])); goto NlMqZ; BdBa5: $url = "\160\141\147\x65\163\57\x61\163\153\137\151\164\x65\x6d\x2f\151\156\x64\145\170\x3f\151\x64\x3d" . $ai["\x69\x64"] . "\46\x6d\145\x73\x73\141\x67\x65\75\61"; goto fG5CV; nQh2K: goto JkktX; goto YFF9Q; eOEQq: $openid = SupermanHandUtil::uid2openid($ai["\x75\x69\x64"]); goto VzRv4; xcXXb: if (!empty($item)) { goto ka3nB; } goto gdVaI; PacnX: if ($ai["\144\x61\x74\x65\154\151\x6e\145"] + 7 * 24 * 3600 - 60 * 10 < TIMESTAMP) { goto ALpa3; } goto cglb2; y7emK: j8TOG: goto JIijd; Sy0Gh: G3MY2: goto S6cdy; PjBW6: $tpl_id = $notice_config["\164\155\160\x6c"]["\163\165\142\x73\143\x72\x69\142\145"]["\164\x6d\x70\x6c\137\151\x64"]; goto FC1IR; Clq6s: foreach ($notice_config["\164\155\160\x6c"]["\x73\165\142\163\143\162\x69\142\x65"]["\144\141\164\141"] as $msg) { goto iqzLH; CpdIh: rHQC1: goto nz6je; hhL7P: fYP5s: goto Rm84O; iqzLH: $send_data = ''; goto Xog5k; omikP: if (!($msg["\156\141\155\145"] == "\164\151\x6d\x65")) { goto YesH7; } goto wOpuJ; wOpuJ: $send_data = date("\131\x2d\x6d\x2d\x64\x20\x48\x3a\x69\x3a\x73", $ai["\144\141\x74\x65\154\151\x6e\145"]); goto M8gIN; Xog5k: if ($msg["\x6e\x61\x6d\145"] == "\x72\x65\x6d\x61\x72\x6b") { goto fYP5s; } goto omikP; vlTTW: jQqu3: goto sFckV; GyIEH: goto rHQC1; goto hhL7P; Rm84O: $send_data = "\346\202\xa8\350\xae\xa2\xe8\264\255\xe7\x9a\x84\xe5\x95\x86\xe5\223\x81\xe4\xbf\241\346\x81\xaf\xe5\215\263\xe5\xb0\x86\350\277\x87\346\x9c\x9f\345\x95\xa6\357\274\x81"; goto CpdIh; nz6je: $msg_data[$msg["\x6b\145\x79"]] = array("\x76\141\154\165\x65" => $send_data); goto vlTTW; M8gIN: YesH7: goto GyIEH; sFckV: } goto neVXU; S6cdy: JkktX: goto YRff0; NlMqZ: pdo_insert("\163\165\160\145\x72\155\141\156\x5f\150\141\x6e\144\62\137\x61\163\153\x5f\155\x65\x73\163\141\147\x65\137\x6c\157\147", array("\165\x6e\x69\141\143\151\144" => $_W["\x75\x6e\151\141\143\x69\x64"], "\x75\151\x64" => $ai["\165\151\144"], "\164\x69\164\154\x65" => $ai["\x74\151\x74\154\145"], "\164\171\160\x65" => $type ? $type : 0, "\x64\141\164\145\x6c\x69\156\145" => TIMESTAMP)); goto JOGfF; PzFlX: $msg_data = array(); goto Clq6s; yvjoX: $item = pdo_fetch($sql, $params); goto xcXXb; JOGfF: cf2nB: goto EgNou; FC1IR: $url = "\160\141\x67\x65\163\x2f\x64\x65\164\141\151\154\x2f\151\156\x64\x65\170\77\151\144\75" . $item["\151\x64"]; goto Bnl4s; f2gvX: $sql = "\x20\123\x45\114\x45\103\x54\x20\52\x20\x46\x52\117\115\x20" . "\50" . $child_sql . "\x29" . tablename("\x73\165\160\145\x72\155\141\156\x5f\150\x61\x6e\x64\x32\x5f\151\164\145\x6d"); goto GHp0q; fG5CV: if (!(!empty($openid) && !empty($tpl_id))) { goto G3MY2; } goto PzFlX; xX7Nt: ka3nB: goto LEJ5X; rNXOw: $type = 1; goto nQh2K; OI0wq: SupermanHandUtil::send_subscribe_tmplmsg($openid, $tpl_id, $url, $msg_data); goto g9WoN; YFF9Q: ALpa3: goto eOEQq; YRff0: if (!$ret) { goto cf2nB; } goto odEnG; gdVaI: goto j8TOG; goto xX7Nt; VzRv4: $tpl_id = $notice_config["\x74\155\x70\154"]["\163\165\x62\x73\143\162\151\142\145"]["\164\155\x70\154\137\x69\x64"]; goto BdBa5; PgHE5: unset($type); goto y7emK; cglb2: $child_sql = "\x53\105\x4c\105\x43\124\40\x2a\x2c\50\x52\x4f\125\x4e\104\50\66\63\67\x38\x2e\x31\x33\x37\40\52\40\62\40\x2a\40\101\123\x49\116\50\x53\121\x52\124\x28\120\117\x57\50\123\111\x4e\x28\x28\x28\x6c\141\164\40\x2a\x20\x50\111\x28\x29\51\40\x2f\x20\61\x38\x30\40\55\x20\x28\72\x6c\x61\164\x20\x2a\x20\x50\x49\50\x29\x29\x20\57\x20\61\x38\60\x29\x20\x2f\x20\x32\x29\54\x20\62\x29\40\53\40\103\x4f\x53\x28\50\x3a\154\x61\x74\40\x2a\40\120\x49\x28\x29\51\x20\x2f\40\x31\70\60\x29\x20\x2a\x20\x43\x4f\123\x28\50\154\x61\164\40\x2a\40\x50\x49\x28\51\51\x20\57\x20\x31\x38\60\x29\x20\x2a\40\120\117\127\x28\123\111\x4e\x28\x28\50\154\156\x67\40\52\40\x50\x49\50\x29\51\x20\57\40\x31\x38\x30\x20\55\40\x28\x3a\154\156\147\40\52\x20\x50\111\50\51\51\40\x2f\40\61\70\x30\x29\x20\x2f\40\62\51\x2c\40\62\x29\51\51\54\40\x32\x29\51\x20\101\123\x20\144\151\x73\x74\x61\x6e\143\145\x20\x46\122\117\115\x20" . tablename("\x73\x75\160\x65\162\x6d\x61\x6e\x5f\x68\x61\x6e\x64\x32\x5f\151\x74\145\155"); goto f2gvX; BXu4I: iHINq: goto rNXOw; EgNou: unset($ret); goto PgHE5; moOiN: SupermanHandUtil::send_subscribe_tmplmsg($openid, $tpl_id, $url, $msg_data); goto L0QhS; H1SJd: $sql .= "\40\x41\x4e\104\40\50\164\x69\x74\x6c\145\40\x4c\111\113\105\40\x27\x25{$ai["\164\151\x74\x6c\x65"]}\x25\47\40\x4f\x52\40\x64\145\163\143\162\151\160\x74\x69\157\156\x20\114\x49\113\x45\40\47\x25{$ai["\164\x69\x74\154\145"]}\45\47\x29"; goto xgsg5; AHb9k: $msg_data = array(); goto EXsTj; xgsg5: $sql .= "\x20\x4f\x52\104\x45\x52\40\x42\x59\x20\143\x72\x65\x61\x74\145\x74\x69\155\x65\40\x44\x45\123\103"; goto rTKWt; EXsTj: foreach ($notice_config["\164\x6d\160\x6c"]["\163\165\142\163\x63\x72\151\142\x65"]["\x64\x61\x74\141"] as $msg) { goto ykVVb; clKgA: Cghtp: goto V8qS4; PnVxB: slNtA: goto zhLB9; aQSM0: if ($msg["\156\141\x6d\145"] == "\162\x65\155\141\162\x6b") { goto slNtA; } goto L7w3F; o5HzM: $msg_data[$msg["\153\x65\171"]] = array("\166\x61\x6c\165\x65" => $send_data); goto LQUN2; LQUN2: OBrIy: goto lZRO9; L7w3F: if (!($msg["\156\141\x6d\x65"] == "\164\151\x6d\145")) { goto Cghtp; } goto b2ej6; ykVVb: $send_data = ''; goto aQSM0; b2ej6: $send_data = date("\x59\55\155\55\x64\40\110\x3a\x73\72\x69"); goto clKgA; onimN: XdYxW: goto o5HzM; zhLB9: $send_data = "\346\x82\xa8\346\220\234\xe7\xb4\xa2\347\x9a\204\xe8\256\242\351\230\205\347\211\251\345\x93\x81\xe5\267\262\xe4\xb8\x8a\347\xba\277\345\225\246\343\200\x82"; goto onimN; V8qS4: goto XdYxW; goto PnVxB; lZRO9: } goto hD_Ow; L0QhS: yAdJb: goto Sy0Gh; hD_Ow: jl2VK: goto B5yZX; JIijd: } goto EP1v3; Y4JY2: $notice_config = $plugin_module["\160\154\165\147\151\x6e\137\x6e\x6f\164\151\x63\145"]["\x6d\157\x64\x75\154\145"]["\143\x6f\156\x66\151\x67"]; goto J5rO1; FBVeN: wAHSf: goto abTKZ; yKDtE: $days_mils = $days * 24 * 60 * 60; goto lOPLs; r6NwX: if (!(!defined("\x4c\117\x43\101\114\x5f\104\105\x56\105\x4c\117\x50\115\105\x4e\124") && self::check_running_interval_time($path . "\x2f\x73\x74\x61\x74\165\163\56\164\170\x74"))) { goto IarG4; } goto bxSY2; fOgoB: if (!$ret) { goto DRh0L; } goto pAl3q; ANi8E: DRh0L: goto IG6xB; Qo8PS: XfyOo: goto c_WXR; rWq7N: cszVx: goto NPMLa; pAl3q: $day = isset($module["\x63\x6f\x6e\146\151\147"]["\147\145\x74\x63\141\x73\150"]["\163\x65\x74\x74\154\145\155\x65\156\164\x5f\x74\x69\x6d\145"]) ? intval($module["\x63\157\x6e\x66\151\147"]["\147\x65\164\143\x61\x73\150"]["\163\x65\x74\164\x6c\x65\155\145\156\164\x5f\x74\151\155\145"]) : 7; goto zgkIZ; TGuyv: Jx93s: goto ANi8E; fQXNX: if (!($result["\x65\162\162\x6e\157"] != 0)) { goto sd9dX; } goto ZGPXs; gOz3o: if (file_exists($path . "\x2f\154\157\x63\141\164\151\x6f\x6e\137\164\x72\x61\x6e\x73\151\x74\x69\157\156\56\164\x78\164")) { goto BgBpV; } goto g0qsY; IR9zl: $gzh_appid = $module["\x63\157\x6e\x66\x69\147"]["\x6d\x69\156\x69\x70\x67"]["\x62\151\156\x64\x5f\147\172\x68"]["\x61\x70\160\151\144"]; goto Yrr9j; lHaks: $stat = pdo_getall("\163\165\160\145\162\x6d\x61\156\137\x68\x61\x6e\x64\x32\137\163\x74\141\164", $filter); goto KpuKR; K1ND1: } public static function check_running_interval_time($filename, $interval = 86400) { goto fhIgC; vQEge: fclose($fp); goto TAktQ; xt1UR: if (!($diff < $interval)) { goto Zl535; } goto KHtVQ; ZhX6y: WeUtility::logging("\x66\141\164\x61\x6c", "\133\x5f\143\x68\145\143\x6b\x5f\162\x75\156\156\151\156\x67\x5f\151\156\x74\145\162\166\141\x6c\137\164\151\x6d\145\x3a{$name}\135\40\x66\x6f\160\145\x6e\x20\146\141\151\x6c\x65\144\54\x20\x66\151\x6c\145\156\141\155\x65\x3d{$filename}"); goto ieLZH; Cv97k: return false; goto JQX4q; raXxQ: WeUtility::logging("\146\141\x74\141\154", "\133\x5f\143\x68\x65\143\x6b\137\162\165\x6e\156\x69\x6e\x67\137\151\156\x74\145\x72\x76\x61\154\x5f\164\151\x6d\x65\x3a{$name}\135\x20\146\x69\154\145\x5f\160\x75\x74\137\143\x6f\x6e\164\145\156\x74\163\40\x66\141\x69\154\x65\x64\50\x32\x29\54\x20\x72\145\x74\75{$ret}"); goto q2c8p; Y3ya7: if (file_exists($filename)) { goto nIYti; } goto h_cre; O_bq7: fclose($fp); goto n4AgH; pXj1C: if (!empty($filename)) { goto rNLGP; } goto QARXI; fhIgC: $name = substr($filename, strrpos($filename, "\57") + 1); goto pXj1C; Q9iQc: if (!($interval > 0)) { goto Af2n_; } goto GuDz5; LFaK4: flock($fp, LOCK_UN); goto O_bq7; TAktQ: return false; goto fqLx0; Pynkl: $diff = TIMESTAMP - $lasttime; goto xt1UR; g8ASb: flock($fp, LOCK_UN); goto zoQy4; sTo55: return true; goto vKQEK; zoQy4: fclose($fp); goto sTo55; FuwEt: nIYti: goto uaxX1; GuDz5: clearstatcache(); goto cZKbv; fssKI: if (!defined("\114\x4f\x43\101\114\137\104\105\126\x45\x4c\x4f\x50\115\105\116\124")) { goto WPXhp; } goto B7VS2; cZKbv: $lasttime = filemtime($filename); goto Pynkl; UVqBA: ftruncate($fp, 0); goto N7_Ja; mTLXc: w41ra: goto fssKI; B7VS2: WPXhp: goto g8ASb; QARXI: WeUtility::logging("\146\141\x74\x61\x6c", "\x5b\137\x63\x68\145\143\153\x5f\162\x75\156\156\x69\156\147\137\x69\156\x74\145\x72\x76\x61\154\x5f\164\151\155\145\72{$name}\135\x20\146\x69\154\x65\x6e\141\155\145\x20\151\163\40\156\165\154\154"); goto Cv97k; hrpj0: return false; goto mTLXc; N7_Ja: rewind($fp); goto py6e1; IbagE: fclose($fp); goto hrpj0; yN2Et: if (!($ret <= 0)) { goto w41ra; } goto raXxQ; n4AgH: return false; goto blyQv; JQX4q: rNLGP: goto Y3ya7; uaxX1: $fp = fopen($filename, "\141"); goto b5e24; py6e1: $ret = fwrite($fp, "\x73\x75\x63\143\145\163\x73"); goto yN2Et; JBpy_: if (flock($fp, LOCK_EX | LOCK_NB)) { goto y5f7b; } goto vQEge; ieLZH: return false; goto yEqLf; q2c8p: flock($fp, LOCK_UN); goto IbagE; yEqLf: cyBDM: goto JBpy_; b5e24: if ($fp) { goto cyBDM; } goto ZhX6y; KHtVQ: if (!defined("\x4c\x4f\103\101\x4c\137\x44\105\x56\105\114\x4f\x50\115\105\116\x54")) { goto MRxbU; } goto eO5mh; eO5mh: MRxbU: goto LFaK4; fqLx0: y5f7b: goto Q9iQc; h_cre: $interval = 0; goto FuwEt; blyQv: Zl535: goto AnAS7; AnAS7: Af2n_: goto UVqBA; vKQEK: } public static function weiqing_polyfill() { goto oRplm; a13xg: if (empty($row)) { goto eCISO; } goto nUS7p; SuNgs: jQ0rF: goto eQmHZ; eJtxt: $_GPC["\155"] = $row["\155\x6f\x64\165\x6c\x65"]; goto piO8A; uODQN: if (!empty($do)) { goto BshoC; } goto FNagi; sRAYY: eCISO: goto Xn3l2; pl_jQ: if (empty($_GPC["\144\x6f"])) { goto jQ0rF; } goto uODQN; oRplm: global $_GPC, $do; goto pl_jQ; nUS7p: $_GPC["\x64\157"] = $row["\x64\157"]; goto eJtxt; Xn3l2: akKc_: goto rUwS4; piO8A: $do = $_GPC["\x64\x6f"]; goto sRAYY; ltSXG: $row = pdo_get("\155\157\x64\165\154\x65\163\x5f\142\151\156\144\151\x6e\147\x73", array("\x65\x69\144" => $eid)); goto a13xg; LS6wu: BshoC: goto kNzj7; FNagi: $do = $_GPC["\x64\157"]; goto LS6wu; kNzj7: goto v5w9f; goto SuNgs; eQmHZ: if (!(isset($_GPC["\x65\x69\x64"]) && $_GPC["\x65\151\144"])) { goto akKc_; } goto TSayP; rUwS4: v5w9f: goto VdbZN; TSayP: $eid = intval($_GPC["\x65\151\144"]); goto ltSXG; VdbZN: } public static function format_date($str) { return substr($str, 0, 4) . "\55" . substr($str, 4, 2) . "\55" . substr($str, 6, 2); } public static function get_bgimg_localpath($filepath) { goto QtXdA; puu4W: $ext = "\152\160\x67"; goto uY5MX; YStHe: YSxLI: goto NhfLi; tu4KT: if (file_exists($filename)) { goto YSxLI; } goto Smh2c; Smh2c: mkdirs(MODULE_ROOT . "\x2f" . $path); goto W1AtU; DrL4F: d23Zm: goto Pl3dH; LvquO: if (!empty($ext)) { goto QBchH; } goto puu4W; Cz0E1: njnVb: goto B3UCa; bHvqG: return $filename; goto jR5Pe; skx0s: if (!strexists($filepath, "\x61\144\x64\x6f\x6e\163\x2f")) { goto d23Zm; } goto xWPbs; B3UCa: $url = tomedia($filepath); goto EhfZD; FaHKZ: return false; goto MqLwb; uY5MX: $filename .= "\56" . $ext; goto LAnUr; iO1N_: $filename = MODULE_ROOT . "\57" . $path . "\x2f" . md5($url) . "\x2e" . $ext; goto LvquO; QtXdA: global $_W; goto skx0s; W1AtU: $content = file_get_contents($url); goto Kedae; Kedae: if (!empty($content)) { goto Cseov; } goto MasJu; jR5Pe: goto f8eFW; goto YStHe; EhfZD: $ext = strtolower(pathinfo($filepath, PATHINFO_EXTENSION)); goto HCg_W; Pl3dH: if (!file_exists(ATTACHMENT_ROOT . $filepath)) { goto njnVb; } goto LM8h8; HCg_W: $path = "\x64\141\x74\x61\x2f" . $_W["\x75\x6e\x69\141\x63\151\144"] . "\x2f\x69\155\x61\x67\x65"; goto iO1N_; t7MgC: f8eFW: goto eRRoe; LAnUr: QBchH: goto tu4KT; NhfLi: return $filename; goto t7MgC; MasJu: WeUtility::logging("\146\x61\164\141\154", "\133\147\x65\164\x5f\x62\147\151\155\147\x5f\x6c\157\x63\141\x6c\160\x61\164\150\x5d\x20\146\141\151\x6c\145\x64\x2c\x20\165\162\154\75" . $url); goto FaHKZ; MqLwb: Cseov: goto D3WUM; D3WUM: file_put_contents($filename, $content); goto bHvqG; LM8h8: return ATTACHMENT_ROOT . $filepath; goto Cz0E1; xWPbs: return IA_ROOT . "\x2f" . $filepath; goto DrL4F; eRRoe: } public static function hex2rgb($hex) { goto w92ak; cnHnu: goto dult2; goto A_m1G; TFlKT: $g = substr($color, 1, 1) . substr($color, 1, 1); goto qdTYS; DrxXt: dult2: goto ITNfx; BhDvB: $color = str_replace("\x23", '', $hex); goto goZiG; qdTYS: $b = substr($color, 2, 1) . substr($color, 2, 1); goto ev2K2; goZiG: if (strlen($color) > 3) { goto Z6J03; } goto sRAN0; w92ak: if (!($hex == '')) { goto cITGc; } goto llNOz; ev2K2: $rgb = array("\162" => hexdec($r), "\x67" => hexdec($g), "\x62" => hexdec($b)); goto cnHnu; llNOz: $rgb = array("\x72" => "\x30", "\x67" => "\x30", "\142" => "\x30"); goto FouPY; sRAN0: $color = $hex; goto TCF9U; TCF9U: $r = substr($color, 0, 1) . substr($color, 0, 1); goto TFlKT; ITNfx: return $rgb; goto a74jv; uQ1UA: $rgb = array("\162" => hexdec(substr($color, 0, 2)), "\147" => hexdec(substr($color, 2, 2)), "\142" => hexdec(substr($color, 4, 2))); goto DrxXt; A_m1G: Z6J03: goto uQ1UA; FouPY: cITGc: goto BhDvB; a74jv: } public static function create_image(&$bgimg, $imgpath, $x, $y, $w, $h, $pct = 100) { goto gvjHy; tnfLj: if (!function_exists($method)) { WeUtility::logging("\x66\x61\164\x61\x6c", "\133\143\x72\x65\141\x74\x65\x5f\x69\x6d\x61\x67\x65\135\x20\x66\141\x69\154\145\x64\x2c\x20\x66\165\156\x63\x74\x69\157\x6e\x20\156\157\40\145\170\x69\x73\164\x2c\40\x66\x75\x6e\143\x74\x69\x6f\156\75" . $method); } goto hShEL; sP9Ut: self::imagecopymerge_alpha($bgimg, $img, $x, $y, 0, 0, $w, $h, $pct); goto rQNr_; iATZy: self::file_image_thumb($imgpath, $dest, $w, $h); goto T94CV; fObn5: yG3om: goto tkAB2; GkGB9: $method = "\151\155\x61\x67\145\x63\162\x65\141\164\145\146\x72\157\x6d{$ext}"; goto tnfLj; T94CV: $imgpath = $dest; goto nKqlm; tkAB2: $ext = strtolower(pathinfo($imgpath, PATHINFO_EXTENSION)); goto NGOm3; nKqlm: $ext = $ext == "\x6a\x70\147" ? "\152\160\145\x67" : $ext; goto GkGB9; Ch0jV: $dest = $arr[0] . "\137\x74\150\165\155\x62\56" . $ext; goto iATZy; NGOm3: $arr = explode("\x2e" . $ext, $imgpath); goto Ch0jV; ewHd3: return; goto fObn5; hShEL: $img = $method($imgpath); goto sP9Ut; gvjHy: if (!empty($imgpath)) { goto yG3om; } goto ewHd3; rQNr_: imagedestroy($img); goto W3f29; W3f29: } public static function file_image_thumb($srcfile, $desfile = '', $width = 0, $hight = 0) { goto vWLNC; vv_16: imagealphablending($img_dst, false); goto YXHDl; I5x5k: yvwyA: goto MVMeA; PYGjd: return error("\x2d\61", "\345\216\x9f\xe5\233\xbe\xe5\203\217\xe4\xb8\x8d\345\255\x98\xe5\234\250"); goto I5x5k; kxHsU: $ext = pathinfo($srcfile, PATHINFO_EXTENSION); goto B_4PK; IWDCP: if (!function_exists("\151\155\x61\x67\x65\160\156\147")) { goto li3a3; } goto mlnR8; ujVYU: return error("\x2d\x31", "\xe8\216\267\345\217\x96\345\216\x9f\xe5\247\213\xe5\233\276\xe5\203\217\xe4\xbf\xa1\xe6\201\257\345\xa4\xb1\xe8\264\xa5"); goto lB1FT; lB1FT: goto XvFgv; goto ir1tK; NRytq: copy($srcfile, $desfile); goto xMY3v; iG1MO: yyGmT: goto FOzFo; xCqT_: KPnzg: goto EBnBL; J_Qlo: goto B102T; goto VCuBc; lqeV4: if (!file_exists($des)) { goto a5uYQ; } goto o7iRM; MVMeA: if (!(intval($width) == 0)) { goto yyGmT; } goto JFD2U; eZDyw: iz4Id: goto vv_16; Mbu6B: if ($org_info[2] == 2) { goto bPiyK; } goto IWDCP; TF9JD: Cchtr: goto rP90F; mlnR8: imagepng($img_dst, $desfile); goto VHJw2; v3aiw: $des = dirname($desfile); goto lqeV4; qzJq_: if (mkdirs($des)) { goto F99A2; } goto rcWmu; DlB3w: $width = intval($_W["\x73\x65\164\164\x69\x6e\x67"]["\165\160\x6c\x6f\x61\x64"]["\151\155\141\147\145"]["\x77\x69\144\164\x68"]); goto iG1MO; VYQYS: return error("\55\61", "\345\216\237\xe5\233\xbe\xe5\x83\217\xe4\xb8\x8d\345\255\x98\345\x9c\250"); goto ipPRt; bV9pI: if (!empty($desfile)) { goto uGOFd; } goto kxHsU; EnToF: if (!function_exists("\151\x6d\x61\147\x65\x6a\160\x65\x67")) { goto n_EF9; } goto jKDqw; jKDqw: imagejpeg($img_dst, $desfile); goto WCqab; bt73P: return error("\x2d\x31", "\xe7\233\xae\xe5\xbd\x95\346\x97\xa0\xe6\xb3\x95\345\206\x99\xe5\x85\245"); goto V6bii; rcWmu: return error("\55\61", "\xe5\x88\233\xe5\xbb\xba\xe7\x9b\256\xe5\275\225\345\244\xb1\350\xb4\xa5"); goto MKaDz; zsjxo: uGOFd: goto v3aiw; ADOmI: ASO0I: goto Q56jQ; qMQW6: imagedestroy($img_org); goto wpemI; ln8dA: if ($org_info) { goto jBJYa; } goto ujVYU; kGChT: OHtAP: goto c92FC; qkMhU: goto WUjIM; goto zAxr0; lsImK: if (file_is_image($srcfile)) { goto yvwyA; } goto PYGjd; CYki2: B102T: goto eojqz; KfYYw: if (!($width == 0)) { goto wItI2; } goto NRytq; JBNmd: if (file_exists($srcfile)) { goto j_oW2; } goto VYQYS; Hl01e: z7wF0: goto zsjxo; gsloe: goto cYMDX; goto ka0jO; rP90F: if (!function_exists("\151\155\x61\x67\x65\x63\x72\x65\x61\164\145\x66\x72\x6f\155\x67\x69\x66")) { goto OHtAP; } goto IJair; gh6fS: return error("\x2d\61", "\x50\110\120\347\x8e\xaf\345\242\203\344\xb8\x8d\346\224\xaf\346\214\x81\345\233\xbe\xe7\x89\207\xe5\xa4\204\347\220\206"); goto IXFL4; y6d60: if (file_exists($desfile)) { goto ASO0I; } goto Hl01e; VCuBc: bPiyK: goto EnToF; Y7SVS: P8IsG: goto Mbu6B; ir1tK: jBJYa: goto KfYYw; wzvwi: b2NV3: goto qkMhU; c92FC: goto WUjIM; goto AqIiW; V6bii: cYMDX: goto tteCh; WCqab: n_EF9: goto CYki2; B_4PK: $srcdir = dirname($srcfile); goto ADOmI; Dmpp6: if ($org_info[2] == 2) { goto FZQ9_; } goto yqQYN; vWLNC: global $_W; goto JBNmd; IJair: $img_org = imagecreatefromgif($srcfile); goto kGChT; US9tU: goto cYMDX; goto fqYTO; CJDXN: wItI2: goto rPimJ; AqIiW: FZQ9_: goto hIbjZ; BBJVF: if (!function_exists("\151\x6d\141\147\145\x63\x72\145\x61\x74\x65\146\162\157\x6d\x70\156\147")) { goto KPnzg; } goto ZgOby; ipPRt: j_oW2: goto lsImK; rPimJ: if ($org_info[2] == 1) { goto Cchtr; } goto Dmpp6; kfe2N: $img_org = imagecreatefromjpeg($srcfile); goto wzvwi; yqQYN: if ($org_info[2] == 3) { goto rX2VC; } goto AKtiU; Dl22Q: imagesavealpha($img_org, true); goto xCqT_; Ta25h: if (function_exists("\x69\155\x61\147\145\143\162\x65\x61\164\145\164\x72\165\145\143\x6f\x6c\157\162") && function_exists("\151\155\x61\x67\x65\143\157\160\x79\162\145\163\141\155\160\154\x65\144") && @($img_dst = imagecreatetruecolor($width, $hight))) { goto iz4Id; } goto gh6fS; xoG6_: XvFgv: goto Ta25h; JFD2U: load()->model("\163\145\164\x74\151\x6e\147"); goto DlB3w; wpemI: return str_replace(ATTACHMENT_ROOT . "\x2f", '', $desfile); goto u_a1B; ZgOby: $img_org = imagecreatefrompng($srcfile); goto Dl22Q; tteCh: $org_info = @getimagesize($srcfile); goto ln8dA; xMY3v: return str_replace(ATTACHMENT_ROOT . "\x2f", '', $desfile); goto CJDXN; fqYTO: a5uYQ: goto qzJq_; zAxr0: rX2VC: goto BBJVF; FOzFo: if (!(intval($width) < 0)) { goto A3yyr; } goto kFGg1; YXHDl: imagesavealpha($img_dst, true); goto rgUoY; VHJw2: li3a3: goto J_Qlo; AKtiU: goto WUjIM; goto TF9JD; ka0jO: JUYwD: goto bt73P; u0hJJ: A3yyr: goto bV9pI; Q56jQ: $desfile = $srcdir . "\x2f" . random(30) . "\x2e{$ext}"; goto y6d60; eojqz: imagedestroy($img_dst); goto qMQW6; IXFL4: goto P8IsG; goto eZDyw; MKaDz: F99A2: goto gsloe; rgUoY: imagecopyresampled($img_dst, $img_org, 0, 0, 0, 0, $width, $hight, $org_info[0], $org_info[1]); goto Y7SVS; hIbjZ: if (!function_exists("\151\x6d\x61\147\145\x63\162\145\141\164\x65\x66\x72\x6f\x6d\x6a\160\x65\147")) { goto b2NV3; } goto kfe2N; EBnBL: WUjIM: goto xoG6_; kFGg1: return error("\x2d\x31", "\xe7\xbc\xa9\346\224\xbe\345\256\xbd\345\xba\246\346\227\240\346\x95\x88"); goto u0hJJ; o7iRM: if (!is_writable($des)) { goto JUYwD; } goto US9tU; u_a1B: } public static function imagecopymerge_alpha($dst_im, $src_im, $dst_x, $dst_y, $src_x, $src_y, $src_w, $src_h, $pct) { goto ryoGD; VoSQW: imagefill($cut, 0, 0, $white); goto ItQ91; xihSQ: $cut = imagecreatetruecolor($src_w, $src_h); goto FmjQ5; jbRZo: return imagecopymerge($dst_im, $cut, $dst_x, $dst_y, $src_x, $src_y, $src_w, $src_h, $opacity); goto xUM24; ryoGD: $opacity = $pct; goto xihSQ; ItQ91: imagecopy($cut, $dst_im, 0, 0, $dst_x, $dst_y, $src_w, $src_h); goto Ch33e; FmjQ5: $white = imagecolorallocate($cut, 255, 255, 255); goto VoSQW; Ch33e: imagecopy($cut, $src_im, 0, 0, $src_x, $src_y, $src_w, $src_h); goto jbRZo; xUM24: } public static function get_avatar_localpath($imgpath) { goto uIp9I; Luonp: return $ret; goto jkLjN; bBhNx: vtVDR: goto gPw6P; dmxB1: return $ret; goto cry7Z; AkXA4: $ret = MODULE_ROOT . "\57\164\145\x6d\x70\154\x61\164\145\x2f\x77\145\142\x2f\x64\x65\146\x61\165\x6c\x74\x2f\151\155\141\x67\x65\163\x2f\x77\151\x64\x67\x65\x74\x5f\141\x76\141\x74\141\x72\56\x70\x6e\147"; goto SyZSP; biFWy: $path = "\x64\x61\x74\x61\x2f" . $_W["\x75\x6e\151\x61\x63\x69\144"] . "\x2f\x61\166\141\164\141\x72"; goto iRBLj; eU_zS: mkdirs(MODULE_ROOT . "\x2f" . $path); goto oniZ6; pjyBZ: BkoqZ: goto biFWy; m2qm7: goto VUqnf; goto V8bhg; gPw6P: return $ret; goto vTSCK; ETR4F: if (!empty($result)) { goto txR1B; } goto W6yNN; oniZ6: file_put_contents($filename, $result); goto RZbYu; DWhWa: $ext = "\152\160\x67"; goto Pacro; E1Wdm: if (!is_error($response)) { goto T3kV1; } goto w1Mrd; b0Zka: goto gWvUE; goto pjyBZ; uIp9I: global $_W; goto AkXA4; ScQhW: $result = $response["\x63\x6f\x6e\164\145\x6e\164"]; goto ETR4F; qm_Wx: Lcjkx: goto is9w8; V8bhg: Nfdo0: goto LkxRA; W6yNN: WeUtility::logging("\x66\141\164\x61\154", "\x5b\147\145\x74\x5f\141\166\141\164\x61\162\x5f\154\157\x63\x61\x6c\160\x61\164\150\135\151\150\x74\164\160\x5f\x67\x65\x74\x20\143\x6f\156\164\145\156\164\40\x69\x73\40\156\x75\154\154\x2c\x20\x69\x6d\147\x70\x61\x74\150\75" . $imgpath . "\x2c\162\145\x73\160\x6f\156\163\145\x3d" . var_export($response, true)); goto Luonp; O3bQK: goto vtVDR; goto rhdOP; w1Mrd: WeUtility::logging("\x66\x61\164\141\154", "\133\147\145\x74\137\141\x76\141\x74\141\x72\137\x6c\157\x63\x61\154\160\141\164\150\x5d\151\x68\164\164\160\x5f\x67\145\x74\40\x66\141\151\154\145\144\x2c\x20\x69\x6d\x67\x70\x61\164\150\75" . $imgpath . "\54\x72\x65\x73\x70\x6f\156\x73\145\x3d" . var_export($response, true)); goto dmxB1; RGqLX: if (strpos($imgpath, "\x3a\x2f\x2f") !== false) { goto BkoqZ; } goto lt114; LkxRA: return $filename; goto EZcFG; is9w8: if (file_exists($filename)) { goto Nfdo0; } goto Xgw8y; wLz3K: return $ret; goto bBhNx; IJOvD: $ret = ATTACHMENT_ROOT . $imgpath; goto A8616; rhdOP: QWHFX: goto wLz3K; A8616: AUs8x: goto b0Zka; lt114: if (!(strpos($imgpath, ATTACHMENT_ROOT) === false)) { goto AUs8x; } goto IJOvD; SyZSP: if ($imgpath == '') { goto QWHFX; } goto RGqLX; iRBLj: $filename = MODULE_ROOT . "\57" . $path . "\57" . md5($imgpath); goto H7DDZ; A2B7Y: if (!empty($ext)) { goto Lcjkx; } goto DWhWa; Pacro: $filename .= "\x2e" . $ext; goto qm_Wx; EZcFG: VUqnf: goto p5WUz; p5WUz: gWvUE: goto O3bQK; NTthD: $response = ihttp_get($imgpath); goto E1Wdm; Xgw8y: load()->func("\x63\157\x6d\155\x75\156\x69\143\x61\164\x69\x6f\x6e"); goto NTthD; RZbYu: return $filename; goto m2qm7; cry7Z: T3kV1: goto ScQhW; jkLjN: txR1B: goto eU_zS; H7DDZ: $ext = strtolower(pathinfo($filename, PATHINFO_EXTENSION)); goto A2B7Y; vTSCK: } public static function resize_img($imgname) { goto k9Co4; SCdNL: imagedestroy($dst_im); goto apkxL; ewM_t: $percent = 110 / $width; goto Sf68C; apkxL: imagedestroy($src_im); goto MEJci; n0CO0: list($width, $height) = getimagesize($file); goto ewM_t; Sf68C: $newwidth = $width * $percent; goto fCHoA; Kkalp: $dst_im = imagecreatetruecolor($newwidth, $newheight); goto WsPHB; yBGwN: $src_im = imagecreatefromjpeg($file); goto Kkalp; WsPHB: imagecopyresized($dst_im, $src_im, 0, 0, 0, 0, $newwidth, $newheight, $width, $height); goto Qzfye; MEJci: return $imgname; goto K_Ib3; fCHoA: $newheight = $height * $percent; goto yBGwN; Qzfye: imagejpeg($dst_im, $imgname); goto SCdNL; k9Co4: $file = $imgname; goto n0CO0; K_Ib3: } public static function circle_avatar($url, $path = "\x2e\57") { goto OKDb5; joOU5: goto MAdb1; goto Ssrg5; KTLG7: $_y = $y - $h / 2; goto oG8aO; OKDb5: $w = 110; goto u0hlL; ILfrq: $c = imagecolorat($src, $x, $y); goto N9H0M; gE5do: IO0Bg: goto EnO_h; HPCEW: if (!($x < $w)) { goto IO0Bg; } goto b5t9e; Ssrg5: nyH5M: goto zWWTh; PnLAK: imagesetpixel($newpic, $x, $y, $c); goto C7cBj; EyZEJ: $y++; goto joOU5; vbEVg: $newpic = imagecreatetruecolor($w, $h); goto XmEFt; QoUss: MAdb1: goto ELfOQ; OXngM: $src = imagecreatefromstring(file_get_contents($original_path)); goto vbEVg; QDyAm: goto rT2GT; goto nZent; nZent: qZcU4: goto PnLAK; u0hlL: $h = 110; goto y2b7D; ELfOQ: if (!($y < $h)) { goto nyH5M; } goto ILfrq; b5t9e: $y = 0; goto QoUss; bZl2a: $x = 0; goto s4yRV; QOHua: return $dest_path; goto aFZxe; EnO_h: imagesavealpha($newpic, true); goto N1lwu; s4yRV: u7uZ1: goto HPCEW; XmEFt: imagealphablending($newpic, false); goto m0qcI; y2b7D: $original_path = $url; goto vmrcz; PNZv5: goto u7uZ1; goto gE5do; oG8aO: if ($_x * $_x + $_y * $_y < $r * $r) { goto qZcU4; } goto ALxOI; m0qcI: $transparent = imagecolorallocatealpha($newpic, 0, 0, 0, 127); goto eM4MK; ALxOI: imagesetpixel($newpic, $x, $y, $transparent); goto QDyAm; C7cBj: rT2GT: goto KlOSt; N1lwu: imagepng($newpic, $dest_path); goto sQV2d; KlOSt: bKktG: goto EyZEJ; lpIJ1: $x++; goto PNZv5; zWWTh: i4Du_: goto lpIJ1; vmrcz: $dest_path = $path . md5($url) . "\x2e\x70\x6e\x67"; goto OXngM; N9H0M: $_x = $x - $w / 2; goto KTLG7; uNE2i: imagedestroy($src); goto QOHua; eM4MK: $r = $w / 2; goto bZl2a; sQV2d: imagedestroy($newpic); goto uNE2i; aFZxe: } public static function gdVersion($user_ver = 0) { goto Np5hd; aa3w9: pcTfZ: goto aFfoT; DcKG9: phpinfo(8); goto wIGCx; zzfN8: $gd_ver = $match[0]; goto w5bjN; FCwOo: if (!($user_ver == 1)) { goto GAVfN; } goto exI9V; wIGCx: $info = ob_get_contents(); goto QqpxB; c0Dmt: cdn1j: goto c1T_C; MQY2J: return 1; goto BqQsy; exI9V: $gd_ver = 1; goto MQY2J; ILTM9: VI3AR: goto ScNsv; P2qfC: Uqg7o: goto v6On6; QqpxB: ob_end_clean(); goto hONLG; hONLG: $info = stristr($info, "\x67\x64\x20\166\x65\162\x73\x69\157\x6e"); goto YnF9Z; U_Dwy: $gd_ver = 1; goto scw8K; XklES: goto cdn1j; goto z7fbP; BqQsy: GAVfN: goto cHjw9; v6On6: if (!function_exists("\147\x64\x5f\x69\x6e\146\x6f")) { goto pcTfZ; } goto Iv2_G; c1T_C: jvffH: goto Osa2v; Osa2v: ob_start(); goto DcKG9; AdJj5: return 2; goto c0Dmt; cHjw9: if (!($user_ver != 2 && $gd_ver > 0)) { goto Uqg7o; } goto gq34H; z7fbP: MrygD: goto tBcp8; ScNsv: static $gd_ver = 0; goto FCwOo; dL2WN: preg_match("\x2f\134\144\x2f", $ver_info["\x47\104\x20\126\145\x72\x73\151\x6f\156"], $match); goto zzfN8; ZHbvn: $gd_ver = $match[0]; goto wX7lG; gq34H: return $gd_ver; goto P2qfC; tBcp8: $gd_ver = 2; goto AdJj5; W1B5C: if ($user_ver == 2) { goto MrygD; } goto U_Dwy; w5bjN: return $match[0]; goto aa3w9; wX7lG: return $match[0]; goto JEu4D; n4JUV: return; goto ILTM9; scw8K: return 1; goto XklES; YnF9Z: preg_match("\x2f\134\x64\57", $info, $match); goto ZHbvn; aFfoT: if (!preg_match("\57\160\150\160\151\x6e\146\157\57", ini_get("\x64\x69\163\141\142\154\145\137\x66\165\x6e\143\x74\x69\x6f\156\x73"))) { goto jvffH; } goto W1B5C; Np5hd: if (extension_loaded("\x67\x64")) { goto VI3AR; } goto n4JUV; Iv2_G: $ver_info = gd_info(); goto dL2WN; JEu4D: } public static function get_wxapp_code($url, $scene = '', $file = false) { goto uNIno; YhPQ9: $result = $account->getCodeLimit($url); goto q1joQ; vK7zy: xFlgA: goto s30xO; ONn7S: CU0U8: goto hNCDy; q1joQ: goto CU0U8; goto vK7zy; uNIno: global $_W; goto Hd1sU; mVA2x: aq5fx: goto doACX; doACX: return $file ? $qrcode_path : MODULE_URL . "\144\x61\x74\x61\x2f" . $_W["\x75\156\x69\141\x63\x69\x64"] . "\57\x71\162\143\x6f\x64\145\57" . $filename; goto NqgaT; sfGNc: if (file_exists($qrcode_path)) { goto aq5fx; } goto H0FQ7; s30xO: $result = $account->getCodeUnlimit($scene, $url); goto ONn7S; qZLIY: if ($scene) { goto xFlgA; } goto YhPQ9; aKb7F: mkdirs($path); goto hmjSh; jMx0o: $qrcode_path = $path . $filename; goto sfGNc; erB4P: qWXKW: goto mVA2x; RLCSB: file_put_contents($qrcode_path, $result); goto erB4P; hmjSh: $filename = md5("\163\165\x70\145\162\x6d\141\x6e\x5f\150\141\156\x64\62\137\160\157\x73\164\145\x72\72{$_W["\165\156\x69\x61\143\x69\144"]}") . "\137" . $scene . "\56\x6a\160\x67"; goto jMx0o; Hd1sU: $path = MODULE_ROOT . "\x2f\x64\141\x74\141\x2f" . $_W["\165\156\151\x61\x63\151\x64"] . "\x2f\161\162\x63\x6f\x64\x65\x2f"; goto aKb7F; hNCDy: if (is_error($result)) { goto qWXKW; } goto RLCSB; H0FQ7: $account = WeAccount::create(); goto qZLIY; NqgaT: } public static function save_image($img, $imgpath) { goto MCgvB; d8G8m: if (!function_exists($method)) { WeUtility::logging("\146\x61\164\x61\x6c", "\133\163\141\166\x65\x5f\151\155\x61\147\x65\135\x20\x66\x61\x69\154\x65\x64\x2c\40\x66\165\156\143\164\x69\x6f\156\x20\156\x6f\x20\145\x78\x69\x73\x74\x2c\40\x66\165\x6e\143\x74\x69\x6f\156\75" . $method); trigger_error("\133\x73\x61\x76\x65\x5f\151\x6d\141\x67\145\x5d\x20\146\141\151\x6c\x65\x64\x2c\x20\x66\x75\156\x63\x74\x69\x6f\x6e\x20\156\157\x20\145\x78\x69\x73\x74\x2c\40\x66\165\x6e\x63\x74\151\157\x6e\x3d" . $method, E_USER_ERROR); } goto Iesuk; BO5fb: $ext = strtolower($ext); goto m6lzK; MCgvB: $ext = pathinfo($imgpath, PATHINFO_EXTENSION); goto BO5fb; nWzUn: $method = "\151\x6d\x61\x67\145{$ext}"; goto d8G8m; m6lzK: $ext = $ext == "\x6a\x70\147" ? "\x6a\160\145\147" : $ext; goto nWzUn; Iesuk: return $method($img, $imgpath); goto qS2_U; qS2_U: } public static function attachment_path() { goto UBZKy; WIdUg: if (!(substr(ATTACHMENT_ROOT, -1, 1) != "\57")) { goto BVO7K; } goto NDXbP; NDXbP: return ATTACHMENT_ROOT . "\x2f"; goto pXdd1; VXYbL: if (defined("\x41\124\124\101\103\110\115\x45\116\x54\x5f\x52\117\x4f\124")) { goto z51G9; } goto VTwzt; huqOJ: return $path; goto lWKxt; UBZKy: global $_W; goto VXYbL; kkq1J: return ATTACHMENT_ROOT; goto PpKaM; pXdd1: BVO7K: goto kkq1J; T0Iip: define("\x41\x54\124\x41\x43\x48\115\105\116\124\137\122\117\x4f\x54", $path); goto huqOJ; VTwzt: $path = IA_ROOT . "\x2f\141\x74\x74\x61\143\150\x6d\145\x6e\164\x2f"; goto T0Iip; lWKxt: z51G9: goto WIdUg; PpKaM: } public static function weaccount_create() { goto gePD0; jmjSC: PGwDl: goto BREV3; VP6Yl: WeUtility::logging("\146\x61\x74\141\154", "\x5b\167\x65\x61\143\143\x6f\165\x6e\164\x5f\x63\x72\x65\x61\x74\x65\135\345\x85\254\xe4\xbc\227\xe5\217\xb7\xe6\xb2\xa1\346\234\211\347\xbb\217\350\277\x87\350\256\244\350\257\201"); goto qfPXM; rFIbP: e0tyT: goto OnNsp; Rt3r3: SpNrI: goto JXQRB; uxXNh: if (isset($_W["\x75\156\151\x61\143\151\x64"]) && $_W["\165\x6e\151\x61\143\x69\x64"]) { goto yOstw; } goto CTbTF; RW_be: S1oFW: goto PNL31; sJsQc: MOmyS: goto Ya9DH; Ya9DH: return $account; goto t00BQ; gePD0: global $_W; goto vmYNP; u7Rzb: yOstw: goto zFZ2N; zFZ2N: $_W["\x61\x63\143\x6f\165\x6e\164"] = uni_fetch($_W["\165\x6e\x69\x61\143\151\144"]); goto fuuau; fuuau: xvByx: goto jmjSC; FKGsb: return $account; goto RW_be; dvnfU: return error(-1, "\345\x88\x9b\345\xbb\272\345\x85\xac\xe4\xbc\x97\xe5\x8f\267\xe6\x93\x8d\xe4\xbd\x9c\xe5\xaf\xb9\350\261\xa1\345\xa4\261\xe8\xb4\xa5"); goto sJsQc; kkUCm: goto e0tyT; goto Rt3r3; PNL31: if (!empty($_W["\x61\143\143\157\x75\156\164"])) { goto PGwDl; } goto uxXNh; CTbTF: if (isset($_W["\x61\x63\151\x64"]) && $_W["\x61\143\x69\144"]) { goto SpNrI; } goto s73P0; ueMtR: $account = WeAccount::create(); goto EDl4E; JXQRB: $_W["\141\x63\x63\157\165\156\164"] = account_fetch($_W["\x61\x63\x69\144"]); goto rFIbP; qfPXM: return error(-1, "\345\x85\xac\xe4\xbc\227\345\217\xb7\xe6\262\xa1\xe6\234\211\347\xbb\217\350\xbf\x87\350\256\244\350\257\201"); goto yEpTZ; a8G1T: return error(-1, "\345\210\235\345\247\213\xe5\x8c\226\xe5\244\xb1\350\264\xa5\357\274\214\xe7\274\xba\345\260\221\x61\x63\x69\144\x7c\x7c\x75\x6e\x69\x61\143\151\x64\xe5\217\202\xe6\x95\260"); goto kkUCm; yEpTZ: tknt2: goto ueMtR; BREV3: if (!($_W["\x61\x63\x63\x6f\165\x6e\x74"]["\x6c\145\x76\x65\154"] < 3)) { goto tknt2; } goto VP6Yl; rd7MR: if (is_null($account)) { goto S1oFW; } goto FKGsb; s73P0: WeUtility::logging("\x66\141\x74\x61\x6c", "\x5b\x77\x65\141\143\x63\x6f\165\156\x74\x5f\143\162\145\141\164\x65\x5d\345\210\235\345\247\x8b\345\x8c\x96\xe5\xa4\261\350\xb4\245\357\xbc\x8c\xe7\xbc\xba\xe5\xb0\221\141\143\x69\144\x7c\174\x75\x6e\151\141\143\x69\144\xe5\x8f\x82\346\x95\260"); goto a8G1T; OnNsp: goto xvByx; goto u7Rzb; EDl4E: if (!is_null($account)) { goto MOmyS; } goto yN2Ze; vmYNP: static $account = null; goto rd7MR; yN2Ze: WeUtility::logging("\x66\141\164\141\x6c", "\133\167\145\x61\143\x63\157\165\x6e\164\137\x63\x72\145\x61\164\145\135\345\210\233\345\xbb\272\345\205\xac\344\xbc\227\345\x8f\267\xe6\x93\215\xe4\275\x9c\xe5\257\271\xe8\xb1\xa1\xe5\244\261\350\264\xa5"); goto dvnfU; t00BQ: } public static function send_tmplmsg($data, $openid, $tpl_id, $url) { goto eod2e; OskkL: YS726: goto Njt0c; N9TEy: WeUtility::logging("\x66\x61\x74\x61\154", "\x5b\x73\145\x6e\144\137\164\x6d\160\154\155\x73\147\135\40\xe6\250\xa1\xe6\235\xbf\346\xb6\210\346\x81\257\345\217\x91\xe9\200\x81\345\xa4\261\350\xb4\xa5\357\xbc\232\x6f\160\x65\156\x69\x64\x3d{$openid}\54\x20\162\x65\164\75" . var_export($ret, true) . "\x2c\40\x6d\x65\163\x73\141\147\x65\75" . var_export($data, true)); goto iJqIZ; rZPHx: return false; goto XvfIU; qg3ZB: goto l20Av; goto lpSAk; h9XbZ: l20Av: goto gZHO6; dDH6d: $account = self::weaccount_create(); goto ymWuz; wlPVt: JuPaB: goto h9XbZ; VhKlR: Nx6OY: goto bTVpz; sfCnG: $account->sendTplNotice($openid, $tpl_id, $data, $url); goto wlPVt; bTVpz: if (!empty($tpl_id)) { goto YS726; } goto voveR; iJqIZ: if (!(strpos($ret["\x6d\145\163\163\141\x67\x65"], "\x34\60\x30\x30\x31") || strpos($ret["\x6d\x65\163\x73\141\x67\x65"], "\64\x32\60\x30\x31"))) { goto JuPaB; } goto sfCnG; eod2e: global $_W; goto dDH6d; bZKDF: return false; goto OskkL; cOUpY: WeUtility::logging("\151\156\146\157", "\x5b\163\x65\x6e\144\137\x74\155\x70\154\x6d\x73\x67\x5d\40\xe6\xa8\241\346\x9d\277\346\xb6\x88\xe6\x81\257\345\x8f\x91\xe9\x80\x81\346\210\x90\345\212\x9f\357\274\x9a\157\160\145\156\151\x64\75{$openid}\x2c\40\155\145\x73\163\141\147\145\x3d" . var_export($data, true)); goto qg3ZB; Njt0c: $ret = $account->sendTplNotice($openid, $tpl_id, $data, $url); goto w1amE; lpSAk: M_5bQ: goto N9TEy; voveR: WeUtility::logging("\x66\141\164\x61\x6c", "\x5b\x73\x65\156\144\x5f\164\x6d\160\x6c\x6d\163\147\x5d\40\xe6\xa8\xa1\346\x9d\xbf\xe6\266\x88\346\201\xaf\xe5\217\x91\351\200\x81\xe5\244\xb1\350\xb4\245\357\xbc\232\346\234\xaa\xe9\x85\215\xe7\275\256\346\xa8\241\346\235\xbf\xe6\266\x88\346\201\xaf"); goto bZKDF; wuVpX: WeUtility::logging("\146\x61\164\x61\x6c", "\x5b\163\x65\156\144\x5f\164\155\160\154\x6d\x73\x67\x5d\40\xe6\250\xa1\346\x9d\xbf\346\266\x88\346\x81\257\xe5\217\221\xe9\x80\x81\345\244\xb1\xe8\264\245\357\xbc\x9a\x6f\160\x65\156\151\144\xe4\xb8\xba\347\251\xba"); goto yJXQT; XvfIU: IvUMH: goto ht2jQ; yJXQT: return false; goto VhKlR; BdxgD: WeUtility::logging("\x66\141\x74\x61\154", "\x5b\x73\x65\156\144\x5f\x74\155\x70\x6c\155\163\147\x5d\x20\xe6\xa8\xa1\346\x9d\xbf\346\xb6\x88\346\x81\257\xe5\217\x91\xe9\200\201\xe5\244\xb1\350\xb4\245\357\274\x9a\351\235\236\xe8\256\244\xe8\257\x81\xe6\234\x8d\xe5\x8a\241\345\217\267\346\262\241\346\x9c\211\345\x8f\x91\xe9\200\201\xe6\xa8\241\xe6\x9d\277\346\266\210\xe6\201\257\346\235\x83\351\231\220"); goto rZPHx; ymWuz: if (!($_W["\141\143\x63\157\165\156\164"]["\154\145\166\x65\154"] != 4)) { goto IvUMH; } goto BdxgD; w1amE: if ($ret !== true) { goto M_5bQ; } goto cOUpY; ht2jQ: if ($openid) { goto Nx6OY; } goto wuVpX; gZHO6: } public static function send_uniform_msg($data, $openid, $tmpl_id, $appid, $url = '') { goto ZCEKG; ZCEKG: global $_W; goto sli33; fUB6j: $result = self::superman_hand2_request($post_url, json_encode($post)); goto BV3W0; pZxht: $post_url = "\x68\164\164\160\163\72\57\x2f\141\x70\x69\x2e\167\x65\151\170\x69\x6e\56\x71\x71\56\x63\157\155\x2f\143\x67\151\x2d\142\151\x6e\57\x6d\145\x73\x73\x61\x67\145\57\167\170\157\160\x65\x6e\57\164\145\x6d\x70\154\141\164\x65\57\x75\156\x69\x66\157\x72\x6d\x5f\x73\x65\156\144\x3f\141\x63\x63\145\x73\163\137\164\x6f\153\x65\156\x3d" . $token; goto fUB6j; M_woK: jGOUu: goto nnFG3; no9dj: $account = WeAccount::create($_W["\x61\x63\x63\x6f\165\156\164"]); goto gQ2Wu; kK93L: return true; goto XjYeU; KM7Xk: if (is_error($result)) { goto MY2M6; } goto epxBX; gQ2Wu: if (!empty($account)) { goto jGOUu; } goto ATSX_; ATSX_: WeUtility::logging("\146\141\x74\x61\154", "\133\163\145\156\x64\x5f\165\156\x69\146\x6f\x72\x6d\x5f\x6d\x73\147\x5d\40\x63\x72\145\141\x74\145\40\141\x63\143\x6f\x75\x6e\164\x20\x66\x61\151\x6c\x65\144\x3a\40\x61\x63\143\x6f\165\156\164\x3d" . var_export($_W["\x61\x63\x63\x6f\x75\156\164"], true)); goto yl7UR; UzvS6: ng9cl: goto yK7Cv; ezHoX: WeUtility::logging("\x66\141\164\x61\x6c", "\x5b\x73\x65\x6e\144\137\165\156\x69\x66\x6f\x72\155\137\x6d\163\x67\x5d\40\x67\x65\x74\101\143\x63\x65\163\163\124\157\153\x65\156\40\x66\141\151\154\145\x64\72\40\164\157\153\145\156\x3d" . var_export($token, true)); goto xMymU; nlLz5: UTWrH: goto no9dj; rHER_: if (!is_error($token)) { goto ng9cl; } goto ezHoX; yl7UR: return false; goto M_woK; BV3W0: $uid = mc_openid2uid($openid); goto KM7Xk; yK7Cv: $post = array("\x74\x6f\165\163\x65\x72" => $openid, "\155\x70\137\x74\x65\155\160\x6c\141\164\x65\x5f\155\163\x67" => array("\x61\x70\160\x69\144" => $appid, "\x74\x65\155\x70\x6c\x61\164\145\137\151\x64" => $tmpl_id, "\x6d\151\156\151\160\x72\x6f\x67\162\x61\155" => array("\x61\160\x70\x69\144" => $account["\153\145\x79"], "\160\x61\147\145\160\x61\x74\x68" => $url ? $url : "\160\x61\x67\x65\x73\57\x68\x6f\x6d\x65\57\x69\156\144\145\170"), "\144\141\x74\x61" => $data)); goto pZxht; nnFG3: $token = $account->getAccessToken(); goto rHER_; KLyJd: return false; goto nlLz5; iGdWL: MY2M6: goto mV0CD; YXiX7: return false; goto mTu_U; jrinW: return false; goto llJSc; epxBX: WeUtility::logging("\x69\x6e\x66\157", "\x5b\x73\x65\x6e\144\x5f\x75\156\151\146\157\162\155\137\x6d\163\147\x5d\x20\345\x8f\221\xe9\200\x81\xe6\210\x90\345\x8a\237\xef\274\232\165\151\x64\x3d{$uid}\54\x20\157\x70\x65\156\151\144\75{$openid}"); goto Xl66c; mV0CD: WeUtility::logging("\x69\156\x66\x6f", "\x5b\x73\145\x6e\144\137\x75\x6e\151\146\157\162\155\137\x6d\x73\147\135\40\xe5\217\221\xe9\200\x81\xe5\244\xb1\xe8\xb4\245\xef\xbc\232\165\151\x64\75{$uid}\x2c\x20\157\160\145\x6e\x69\x64\x3d{$openid}\x2c\x20\x72\x65\163\165\154\x74\75" . var_export($result, true) . "\x2c\x20\160\157\x73\164\x3d" . var_export($post, true)); goto jrinW; gBTeO: WeUtility::logging("\146\141\x74\x61\154", "\133\x73\145\x6e\144\x5f\165\x6e\151\x66\157\x72\x6d\137\155\163\x67\x5d\x20\346\250\241\xe6\235\xbf\346\266\x88\xe6\201\257\xe5\217\221\xe9\200\201\xe5\xa4\xb1\xe8\264\245\xef\274\x9a\xe6\x9c\xaa\351\205\215\347\275\xae\xe6\xa8\xa1\xe6\x9d\xbf\xe6\xb6\x88\xe6\x81\xaf"); goto YXiX7; sli33: if (!empty($tmpl_id)) { goto MKqi2; } goto gBTeO; mTu_U: MKqi2: goto J1jvz; J1jvz: if (!empty($openid)) { goto UTWrH; } goto Bu3dQ; llJSc: VyXv1: goto kK93L; Bu3dQ: WeUtility::logging("\146\x61\164\x61\x6c", "\x5b\x73\x65\156\x64\x5f\x75\156\x69\x66\x6f\162\155\x5f\155\163\x67\x5d\x20\xe6\xa8\xa1\346\x9d\277\346\266\x88\xe6\x81\257\345\x8f\x91\351\x80\x81\xe5\xa4\261\350\xb4\xa5\xef\xbc\232\x6f\x70\145\156\151\x64\xe4\xb8\xba\xe7\xa9\xba"); goto KLyJd; Xl66c: goto VyXv1; goto iGdWL; xMymU: return false; goto UzvS6; XjYeU: } public static function isBindPort($port, &$errno = null, &$errstr = null) { goto odkd4; N4R4F: fclose($socket); goto fIcmH; AA8Ja: xY7Ha: goto IBRLb; odkd4: $socket = @stream_socket_server("\164\143\160\72\57\x2f\61\x32\67\56\x30\56\60\56\x31\x3a" . $port, $errno, $errstr); goto eRR2q; IBRLb: return true; goto Hj_iI; fIcmH: unset($socket); goto wb2vn; eRR2q: if (!$socket) { goto xY7Ha; } goto N4R4F; wb2vn: return false; goto AA8Ja; Hj_iI: } public static function get_domain($siteurl, $level = 0) { goto kPRHH; kO_hv: if (!preg_match("\57\136\133\60\55\71\x5d\x7b\61\54\63\175\x5c\x2e\133\x30\x2d\x39\x5d\173\61\54\x33\175\134\x2e\133\60\55\71\135\173\x31\54\x33\175\134\x2e\x5b\x30\x2d\71\135\x7b\x31\x2c\x33\x7d\x24\57", $domain)) { goto HhVrA; } goto R3mkP; JdAet: $domain = $arr[0]; goto kO_hv; dBRS9: $arr = explode("\x2e", $domain); goto gfq7a; UU8Iw: $level = count($arr) - 1; goto Hn8x7; yYPLm: HhVrA: goto dBRS9; gfq7a: $tmp = array(); goto cx2J4; uJ5PG: R_RTa: goto IMV_Y; cYZ2c: $arr = explode("\57", $siteurl); goto JdAet; nFCuo: $siteurl = $arr[0]; goto cYZ2c; Ydxse: goto R_RTa; goto ZlaWY; VHTh3: array_push($tmp, $arr[$j]); goto z13oV; kPRHH: $siteurl = preg_replace("\x2f\150\164\x74\x70\x5b\163\135\x7b\x30\54\x31\x7d\x3a\x5c\57\134\57\57\151", '', $siteurl, 1); goto dMi3Z; Cnh3c: return $domain; goto sdv2D; qGtdk: $j = count($arr) - 1; goto uJ5PG; R3mkP: return $domain; goto yYPLm; z13oV: stEap: goto aDcoo; Hn8x7: zMPpQ: goto P5HLS; dMi3Z: $arr = explode("\72", $siteurl); goto nFCuo; CpE2S: $j--; goto Ydxse; M6Epp: $tmp = array_reverse($tmp); goto EyS8N; P5HLS: $i = 0; goto qGtdk; ZlaWY: Lw5ft: goto M6Epp; IMV_Y: if (!($i <= $level && $j >= 0)) { goto Lw5ft; } goto VHTh3; aDcoo: $i++; goto CpE2S; cx2J4: if (!($level <= 0)) { goto zMPpQ; } goto UU8Iw; EyS8N: $domain = implode("\x2e", $tmp); goto Cnh3c; sdv2D: } public static function superman_hand2_request($url, $post = '') { goto TphLU; TphLU: $response = ihttp_request($url, $post); goto dt1nT; aEsMC: if (!empty($result["\145\x72\162\x63\157\x64\145"])) { goto ZTCmg; } goto cG7iX; sq3RB: if (empty($result)) { goto qyTWd; } goto aEsMC; C12qf: ZTCmg: goto Pvl52; i0TUG: return error($result["\145\x72\162\x63\x6f\144\x65"], "\xe8\256\277\351\x97\256\xe5\x85\254\344\xbc\x97\345\271\xb3\xe5\217\xb0\346\216\245\345\217\243\345\xa4\xb1\xe8\xb4\245\x2c\x20\xe9\224\231\350\257\257\350\257\xa6\xe6\203\205\x3a\x20{$result["\x65\162\x72\x63\x6f\x64\x65"]}"); goto EoC53; ny1LV: nHH9n: goto uc45F; cG7iX: goto nHH9n; goto jDQ1m; dt1nT: $result = @json_decode($response["\x63\157\x6e\x74\x65\x6e\x74"], true); goto nAkqt; nAkqt: if (!is_error($response)) { goto q1wt7; } goto i0TUG; WdrPo: goto nHH9n; goto C12qf; EoC53: q1wt7: goto sq3RB; Pvl52: return error($result["\x65\162\162\x63\157\144\145"], "\xe8\xae\277\351\x97\xae\345\x85\xac\xe4\274\227\xe5\xb9\xb3\xe5\x8f\260\xe6\216\xa5\xe5\x8f\243\xe5\xa4\261\xe8\264\xa5\54\40\351\x94\231\xe8\257\257\72\x20{$result["\x65\x72\x72\x6d\x73\x67"]}\54\xe9\224\x99\xe8\257\257\xe8\257\xa6\346\x83\205\357\xbc\x9a{$result["\x65\162\x72\143\157\144\145"]}"); goto ny1LV; uc45F: return $result; goto J6XgS; rTkLR: return error(-1, "\346\216\xa5\xe5\217\xa3\350\260\x83\xe7\224\xa8\xe5\xa4\xb1\350\264\245\54\40\345\205\203\xe6\225\260\346\x8d\xae\x3a\40{$response["\155\145\164\x61"]}"); goto WdrPo; jDQ1m: qyTWd: goto rTkLR; J6XgS: } public static function get_recycle_categorys($filter = array(), $fields = array(), $keyfield = '', $orderby = array(), $limit = array()) { goto CUWDz; pdjCX: foreach ($list as $row) { goto JKLFX; ID53q: $row["\143\x68\x69\154\144\x72\145\156"] = $children; goto FtyOb; mV33f: if (!$children) { goto r2mdp; } goto ID53q; FtyOb: r2mdp: goto tg6ku; sY09T: fRrvm: goto ax0LO; Op9yM: $children = self::get_recycle_categorys($filter, $fields, $keyfield, $orderby, $limit); goto mV33f; JKLFX: $filter["\160\151\x64"] = $row["\151\x64"]; goto Op9yM; tg6ku: $data[] = $row; goto sY09T; ax0LO: } goto uNHek; tzrQ0: @usort($list, array(SupermanHandUtil, "\x73\157\162\164\137\x64\151\x73\x70\154\141\171\157\x72\x64\x65\162\137\x64\x65\x73\x63")); goto pdjCX; uNHek: dVMIz: goto yfXEM; jspKG: if (!$list) { goto tZrRp; } goto tzrQ0; SW60v: tZrRp: goto drSO7; yfXEM: return $data; goto SW60v; CUWDz: $list = pdo_getall("\x73\165\160\145\162\x6d\141\156\137\x68\x61\156\x64\62\x5f\162\145\x63\171\x63\x6c\x65\137\143\141\164\145\147\x6f\x72\x79", $filter, $fields, $keyfield, $orderby, $limit); goto jspKG; drSO7: } public static function sort_displayorder_desc($m1, $m2) { goto CdU9X; ys6zU: return 0; goto RHHdd; He4pt: return $m1["\x64\x69\163\160\154\x61\x79\157\x72\x64\145\162"] < $m2["\144\x69\163\160\154\141\x79\157\x72\x64\x65\x72"] ? 1 : -1; goto Las87; RHHdd: KOeE4: goto He4pt; CdU9X: if (!($m1["\144\x69\x73\x70\154\141\171\157\162\x64\145\x72"] == $m2["\144\151\x73\160\154\x61\171\x6f\162\x64\x65\162"])) { goto KOeE4; } goto ys6zU; Las87: } public static function sort_displayorder_asc($m1, $m2) { goto JyWFv; bWbgK: return 0; goto OJwC8; cddpv: return $m1["\144\x69\x73\x70\154\141\171\x6f\162\x64\145\x72"] < $m2["\x64\x69\163\x70\154\141\x79\x6f\x72\x64\145\x72"] ? -1 : 1; goto bG3dN; OJwC8: JPA3E: goto cddpv; JyWFv: if (!($m1["\x64\151\x73\160\x6c\x61\x79\157\x72\x64\145\162"] == $m2["\144\151\163\x70\x6c\x61\x79\x6f\x72\x64\145\x72"])) { goto JPA3E; } goto bWbgK; bG3dN: } public static function get_links($type, $title = '') { goto t5Nki; pelzZ: X0p_J: goto T4ykA; t5Nki: global $_W; goto UqpeA; Bi_K0: return $links; goto vrDWC; fOVXh: if (empty($title)) { goto gC1OU; } goto KurM3; yvBpi: h71kr: goto XcGOM; KurM3: foreach ($links as $li) { goto E52Ck; E52Ck: if (!($li["\164\x69\x74\x6c\145"] == $title)) { goto cp2o2; } goto Gmdne; Gmdne: return $li["\165\162\154"]; goto Jr6CK; Jr6CK: cp2o2: goto NUd8k; NUd8k: MiznF: goto j4qUC; j4qUC: } goto yvBpi; TJfgw: $notice = pdo_getall("\163\x75\160\145\162\x6d\141\x6e\137\150\x61\x6e\144\62\x5f\x6e\157\164\x69\143\x65", $filter, "\52", '', $orderby); goto s40lW; i72Mi: $orderby = "\x64\x69\163\x70\154\x61\171\x6f\x72\144\x65\x72\40\x44\105\123\103"; goto TJfgw; ME2Yn: if (!($type == ACCOUNT_TYPE_APP_NORMAL)) { goto ibIVa; } goto c7ulT; s40lW: if (empty($notice)) { goto KdLKk; } goto LUNV_; LUNV_: foreach ($notice as $n) { $links[] = array("\x74\151\x74\154\x65" => "\xe5\205\254\345\221\212\72" . $n["\x74\151\x74\x6c\x65"], "\165\162\154" => "\x2f\160\141\x67\145\x73\57\141\144\57\151\156\x64\145\170\77\x69\144\x3d" . $n["\x69\144"]); hryDF: } goto pelzZ; Glii9: ibIVa: goto fOVXh; D8NU7: gC1OU: goto Bi_K0; UqpeA: $links = array(array("\164\x69\164\x6c\x65" => "\xe9\246\226\351\xa1\xb5", "\x75\x72\154" => $type == ACCOUNT_TYPE_APP_NORMAL ? "\57\x70\x61\147\x65\x73\x2f\x68\157\x6d\145\57\151\156\144\x65\170" : self::createMobileUrl("\150\157\155\145")), array("\x74\x69\164\x6c\x65" => "\xe5\x8f\x91\345\xb8\203\351\241\265", "\165\x72\x6c" => $type == ACCOUNT_TYPE_APP_NORMAL ? "\57\160\141\147\x65\x73\57\160\157\x73\x74\x2f\151\156\x64\x65\x78" : self::createMobileUrl("\151\164\145\155", array("\141\143\164" => "\160\x6f\x73\164"))), array("\x74\151\164\x6c\145" => "\346\x88\x91\347\x9a\x84", "\165\x72\x6c" => $type == ACCOUNT_TYPE_APP_NORMAL ? "\x2f\x70\x61\147\145\x73\x2f\x6d\171\57\151\156\144\145\x78" : self::createMobileUrl("\x6d\x79")), array("\x74\151\164\154\x65" => "\xe6\266\x88\xe6\201\xaf\xe5\x88\227\350\241\xa8", "\165\x72\154" => $type == ACCOUNT_TYPE_APP_NORMAL ? "\x2f\x70\141\147\145\163\57\x6d\145\x73\x73\x61\147\145\57\x69\x6e\144\x65\170" : self::createMobileUrl("\155\145\163\163\141\147\145", array("\141\x63\164" => "\154\151\163\x74"))), array("\x74\x69\x74\154\145" => "\344\273\xbb\xe5\212\xa1\xe4\xb8\255\345\277\203", "\x75\x72\154" => $type == ACCOUNT_TYPE_APP_NORMAL ? "\x2f\x70\x61\x67\x65\163\57\x67\x65\164\x5f\x63\x72\x65\x64\151\164\57\151\x6e\144\145\x78" : self::createMobileUrl("\155\171", array("\141\x63\164" => "\x67\145\164\x5f\x63\162\145\144\x69\164"))), array("\x74\x69\x74\x6c\x65" => "\347\x89\xa9\xe5\223\x81\xe5\x88\x97\350\241\xa8", "\165\x72\154" => $type == ACCOUNT_TYPE_APP_NORMAL ? "\57\160\141\x67\x65\163\x2f\x6c\x69\x73\x74\x2f\151\156\x64\x65\170" : self::createMobileUrl("\151\164\145\x6d", array("\141\x63\x74" => "\154\151\x73\x74"))), array("\x74\x69\164\154\145" => "\xe6\210\x91\xe8\256\242\xe9\x98\205\xe7\x9a\204", "\x75\162\154" => $type == ACCOUNT_TYPE_APP_NORMAL ? "\57\160\141\147\x65\163\57\141\x73\x6b\137\151\x74\x65\x6d\57\151\156\x64\x65\x78" : self::createMobileUrl("\141\x73\x6b\137\151\x74\145\155", array("\141\143\164" => "\144\x69\x73\160\x6c\x61\x79", "\155" => "\163\165\x70\145\x72\155\x61\x6e\137\150\141\x6e\x64\x32\x5f\160\x6c\165\x67\151\156\x5f\156\x6f\x74\x69\143\x65")))); goto ME2Yn; c7ulT: $filter = array("\x75\x6e\151\141\x63\151\x64" => $_W["\x75\x6e\151\x61\x63\151\x64"], "\x73\164\x61\164\x75\x73" => 1); goto i72Mi; T4ykA: KdLKk: goto Glii9; XcGOM: return ''; goto D8NU7; vrDWC: } public static function uid2openid($uid) { $fans = mc_fansinfo($uid); return $fans && $fans["\157\x70\145\156\x69\144"] ? $fans["\157\160\145\156\x69\144"] : ''; } public static function check_blacklist() { goto Kx3ho; bF1ql: $sql = "\x53\x45\114\105\103\x54\40\x2a\40\106\122\x4f\115\40" . tablename("\x73\165\x70\x65\x72\155\141\x6e\x5f\x68\141\156\x64\62\137\x6d\145\155\142\x65\x72\x5f\142\x6c\141\x63\153\154\151\x73\x74") . "\x20\x57\x48\x45\x52\x45\40\x75\x6e\x69\141\143\151\144\x3d\72\165\156\151\x61\143\x69\144\x20\101\116\104\40\x75\151\x64\75\72\x75\x69\x64"; goto nEcwt; rAth6: $black = pdo_fetch($sql, $params); goto OJknn; Kx3ho: global $_W; goto bF1ql; nEcwt: $sql .= "\x20\101\116\x44\x20\50\x62\x6c\157\143\153\164\x69\155\x65\x20\x3d\x20\61\40\117\122\40\x62\x6c\x6f\143\153\164\151\155\145\x20\x3e" . TIMESTAMP . "\x29"; goto S4LSZ; S4LSZ: $params = array("\x3a\165\x6e\x69\x61\x63\151\x64" => $_W["\165\x6e\151\141\143\151\x64"], "\72\x75\151\x64" => $_W["\x6d\145\x6d\x62\x65\162"]["\165\151\144"]); goto rAth6; OJknn: return $black; goto yxVRF; yxVRF: } public static function create_ordersn() { goto OFu4H; YGsoh: yamb3: goto M2Ulx; Vgj3b: if ($exist) { goto cuvs6; } goto YGsoh; M2Ulx: return $ordersn; goto E6Cic; OFu4H: cuvs6: goto y0mLm; y0mLm: $ordersn = "\123" . date("\x59\155\144") . random(6, 1); goto deJl6; oSLac: $exist = $row ? true : false; goto Vgj3b; deJl6: $row = pdo_fetchcolumn("\x53\105\x4c\105\103\x54\x20\x69\144\x20\x46\122\117\115\40" . tablename("\x73\x75\x70\x65\x72\x6d\x61\156\137\x68\141\156\x64\x32\137\157\x72\144\145\x72") . "\x20\127\x48\105\122\x45\40\x6f\162\144\x65\x72\x73\156\75\72\157\x72\x64\145\162\163\x6e", array("\x3a\x6f\162\x64\145\x72\163\x6e" => $ordersn)); goto oSLac; E6Cic: } public static function sync_remote_file($paths) { goto SVYV7; N0tlG: load()->model("\x61\164\164\141\143\x68\x6d\x65\156\164"); goto GzEBG; JKZVo: nXvM_: goto N5pe1; HwUJY: if (!($_W["\163\145\164\x74\x69\156\147"]["\x72\145\x6d\x6f\x74\x65"]["\164\171\x70\x65"] == 4)) { goto YJq6j; } goto ewN3Z; m22rW: tJLJu: goto HwUJY; SVYV7: global $_W; goto pGdMN; sm4Qx: $auth = new Qiniu\Auth($_W["\x73\145\x74\164\x69\x6e\x67"]["\162\x65\155\157\x74\x65"]["\x71\151\x6e\151\x75"]["\141\143\143\x65\x73\163\153\145\x79"], $_W["\163\x65\x74\x74\151\156\147"]["\x72\145\155\157\x74\145"]["\x71\x69\156\x69\x75"]["\x73\145\x63\x72\145\164\x6b\145\x79"]); goto F_qxb; wOQFD: $endpoint = "\150\x74\x74\160\72\57\57" . $buckets[$_W["\x73\145\164\x74\x69\156\147"]["\x72\145\x6d\157\164\145"]["\141\154\x69\157\163\x73"]["\142\165\x63\x6b\x65\x74"]]["\154\x6f\x63\141\x74\x69\157\156"] . "\56\x61\x6c\151\171\x75\x6e\143\163\56\143\157\155"; goto Z1riv; CYUqz: TLKAD: goto JKZVo; abZDJ: eS5_S: goto hdiAs; F_qxb: $uploadmgr = new Qiniu\Storage\UploadManager(); goto C3KMo; QNZYn: require IA_ROOT . "\57\x66\x72\x61\x6d\145\167\x6f\x72\x6b\x2f\x6c\x69\142\162\x61\162\x79\x2f\161\x69\156\x69\x75\x2f\x61\x75\164\x6f\154\x6f\x61\x64\56\160\x68\160"; goto sm4Qx; GzEBG: $buckets = attachment_alioss_buctkets($_W["\x73\145\x74\x74\x69\x6e\x67"]["\x72\x65\155\x6f\164\145"]["\x61\x6c\151\x6f\x73\x73"]["\x6b\145\x79"], $_W["\x73\x65\164\164\151\x6e\x67"]["\x72\145\155\x6f\x74\145"]["\x61\x6c\151\157\x73\163"]["\x73\145\143\x72\x65\164"]); goto wOQFD; XXuKq: if (!($_W["\x73\x65\x74\164\151\x6e\x67"]["\162\x65\155\157\x74\145"]["\164\x79\x70\x65"] == 2 && !empty($_W["\163\145\x74\164\x69\156\147"]["\x72\x65\x6d\x6f\x74\145"]["\141\154\151\157\x73\x73"]["\153\145\171"]) && !empty($_W["\163\145\x74\164\151\156\x67"]["\x72\x65\x6d\x6f\164\145"]["\x61\154\151\157\163\x73"]["\x73\145\x63\162\x65\164"]) && !empty($_W["\163\145\x74\164\x69\156\x67"]["\x72\x65\155\x6f\164\145"]["\x61\x6c\151\157\x73\163"]["\142\x75\143\153\145\164"]))) { goto tJLJu; } goto N0tlG; Lgln1: foreach ($paths as $path) { goto oihtr; Wqn_K: switch ($uploadRet["\143\x6f\144\x65"]) { case -62: $message = "\350\276\x93\345\x85\xa5\xe7\232\204\x61\160\x70\x69\144\346\234\x89\350\xaf\257"; goto NfD2d; case -79: $message = "\350\xbe\x93\xe5\x85\xa5\xe7\x9a\204\x53\145\143\x72\145\x74\111\x44\346\234\x89\xe8\257\257"; goto NfD2d; case -97: $message = "\350\xbe\x93\xe5\x85\245\347\232\204\x53\x65\x63\162\x65\x74\113\105\131\xe6\234\x89\350\xaf\xaf"; goto NfD2d; case -166: $message = "\xe8\xbe\x93\xe5\205\xa5\347\232\x84\142\x75\x63\x6b\145\x74\346\234\x89\350\257\257"; goto NfD2d; } goto wkfSz; XWiE_: WeUtility::logging("\x69\x6e\x66\157", "\133\x63\157\163\135\x20\165\160\154\x6f\x61\144\40\x73\x75\x63\143\x65\x73\x73\54\x20\x70\141\x74\x68\75" . $path); goto uvOuw; M_wVz: Tq0CT: goto Wqn_K; ZNCtZ: $uploadRet = qcloudcos\Cosapi::upload($_W["\x73\x65\x74\x74\151\156\147"]["\x72\145\x6d\157\164\145"]["\143\x6f\x73"]["\x62\165\x63\x6b\x65\x74"], self::attachment_path() . $path, $path, '', 3 * 1024 * 1024, 0); goto xMD7Y; KHHGd: h44O9: goto GefPF; RWqaq: En7JX: goto txCty; kqmWK: if ($uploadRet["\x63\x6f\144\x65"] != 0) { goto Tq0CT; } goto Nr1e8; d6hwm: xqh5w: goto oP4h9; EhXiL: $uploadRet = \Qcloud_cos\Cosapi::upload($_W["\163\x65\164\164\x69\x6e\147"]["\162\145\x6d\x6f\164\145"]["\143\x6f\163"]["\142\165\143\153\145\164"], self::attachment_path() . $path, $path, '', 3 * 1024 * 1024, 0); goto X7yF2; uvOuw: goto LZRti; goto M_wVz; X7yF2: goto LnDFz; goto d6hwm; wkfSz: ROCV8: goto QrD1H; Nr1e8: file_delete(self::attachment_path() . $path); goto XWiE_; ca8xT: qcloudcos\Cosapi::setRegion($_W["\163\x65\164\x74\x69\156\x67"]["\162\x65\x6d\157\x74\145"]["\143\157\x73"]["\154\x6f\143\141\154"]); goto ZNCtZ; uyP9S: goto En7JX; goto KHHGd; nUlfi: load()->library("\143\x6f\x73\166\63"); goto EhXiL; oihtr: if (!(empty($path) || !file_exists(self::attachment_path() . $path))) { goto h44O9; } goto uyP9S; xMD7Y: LnDFz: goto kqmWK; QrD1H: NfD2d: goto drl_P; drl_P: WeUtility::logging("\167\x61\x72\156\151\x6e\147", "\133\x63\157\x73\x5d\x20\165\160\154\157\x61\x64\40\x66\141\x69\x6c\145\x64\54\x20\x6d\145\x73\x73\141\x67\x65\x3d" . $message . "\x2c\40\x72\x65\164\x3d" . var_export($uploadRet, true)); goto MZcY4; MZcY4: LZRti: goto RWqaq; GefPF: if (!empty($_W["\163\145\x74\x74\151\156\x67"]["\162\145\155\157\164\x65"]["\143\x6f\x73"]["\154\x6f\x63\141\154"])) { goto xqh5w; } goto nUlfi; oP4h9: load()->library("\x63\x6f\163"); goto ca8xT; txCty: } goto T3Kfb; hdiAs: YJq6j: goto tvlX2; C3KMo: if (!$paths) { goto nXvM_; } goto fK1Jb; N5pe1: yo3Ii: goto XXuKq; ewN3Z: if (!$paths) { goto eS5_S; } goto Lgln1; pGdMN: if (!($_W["\163\145\x74\x74\151\156\147"]["\x72\x65\155\157\164\145"]["\164\171\160\x65"] == 3 && !empty($_W["\163\x65\164\x74\x69\x6e\x67"]["\x72\x65\155\x6f\164\145"]["\161\151\156\151\x75"]["\x75\162\x6c"]) && !empty($_W["\x73\x65\x74\x74\x69\156\147"]["\162\145\155\157\164\x65"]["\x71\151\x6e\151\x75"]["\x61\x63\x63\145\x73\163\x6b\145\171"]) && !empty($_W["\x73\x65\x74\164\151\x6e\x67"]["\x72\x65\x6d\x6f\164\145"]["\161\x69\156\x69\x75"]["\163\145\143\x72\x65\x74\153\x65\x79"]) && !empty($_W["\163\x65\164\164\x69\x6e\147"]["\x72\145\x6d\x6f\164\145"]["\x71\x69\x6e\151\x75"]["\142\165\x63\153\145\164"]))) { goto yo3Ii; } goto QNZYn; T3Kfb: xrSwP: goto abZDJ; fK1Jb: foreach ($paths as $path) { goto ygvJK; PLhwh: file_delete(self::attachment_path() . $path); goto PgX2e; FdEkk: I8NCf: goto HLq54; HLq54: ufN_3: goto nI3gk; Nh_q6: $putpolicy = Qiniu\base64_urlSafeEncode(json_encode(array("\x73\x63\157\160\145" => $_W["\x73\x65\x74\x74\151\x6e\147"]["\162\x65\x6d\157\164\x65"]["\161\151\156\x69\x75"]["\142\165\143\x6b\x65\x74"] . "\x3a" . $path))); goto sYP5M; YfBKS: vDujl: goto Nh_q6; GBkiT: goto I8NCf; goto zAnSd; DEPdl: if ($err === null) { goto kmUkz; } goto Z5nYC; ygvJK: if (!(empty($path) || !file_exists(self::attachment_path() . $path))) { goto vDujl; } goto TMMrX; x_bbz: list($ret, $err) = $uploadmgr->putFile($uploadtoken, $path, self::attachment_path() . $path); goto DEPdl; zAnSd: kmUkz: goto PLhwh; sYP5M: $uploadtoken = $auth->uploadToken($_W["\163\x65\x74\x74\151\x6e\147"]["\x72\145\155\157\x74\x65"]["\x71\x69\x6e\151\165"]["\x62\x75\x63\x6b\x65\x74"], $path, 3600); goto x_bbz; TMMrX: goto ufN_3; goto YfBKS; Z5nYC: WeUtility::logging("\167\x61\162\156\151\x6e\x67", "\x5b\161\151\x6e\x69\x75\135\x20\165\160\x6c\157\x61\x64\x20\146\141\151\154\x65\x64\x2c\40\x72\x65\x74\75" . var_export($ret, true) . "\x2c\x20\x65\162\x72\x3d" . var_export($err, true)); goto GBkiT; PgX2e: WeUtility::logging("\151\x6e\146\x6f", "\133\x71\151\156\151\x75\135\40\165\x70\x6c\157\x61\x64\x20\163\x75\x63\x63\x65\x73\163\x2c\x20\x70\141\x74\x68\75" . $path); goto FdEkk; nI3gk: } goto CYUqz; Z1riv: try { goto qCcRH; qCcRH: $ossClient = new \OSS\OssClient($_W["\x73\145\x74\x74\151\x6e\147"]["\x72\x65\155\x6f\x74\145"]["\141\154\x69\x6f\163\163"]["\x6b\x65\x79"], $_W["\163\145\x74\164\x69\156\147"]["\162\145\155\x6f\x74\145"]["\x61\x6c\151\157\163\x73"]["\x73\x65\143\x72\145\164"], $endpoint); goto kOTus; fNOXc: foreach ($paths as $path) { goto Q9hC2; tvnLW: WeUtility::logging("\x77\141\x72\156\151\x6e\147", "\133\x61\154\151\x6f\x73\163\x5d\40\x75\160\154\157\x61\x64\x20\x66\141\x69\x6c\145\x64\54\x20\x72\x65\164\75" . var_export($ret, true)); goto h_JYX; h_JYX: goto KzcQh; goto MuKd2; kZ4WU: IXxii: goto bexOV; bexOV: $ret = $ossClient->uploadFile($_W["\x73\145\x74\x74\x69\156\147"]["\x72\145\155\157\x74\145"]["\x61\x6c\x69\x6f\163\163"]["\142\x75\x63\x6b\x65\x74"], $path, self::attachment_path() . $path); goto GioTp; lM_ur: R9j1S: goto VHJYQ; MazNY: file_delete(self::attachment_path() . $path); goto XvfZY; lOiFO: KzcQh: goto lM_ur; Q9hC2: if (!(empty($path) || !file_exists(self::attachment_path() . $path))) { goto IXxii; } goto AlP79; AlP79: goto R9j1S; goto kZ4WU; GioTp: if ($ret === null) { goto wYaq1; } goto tvnLW; XvfZY: WeUtility::logging("\151\x6e\146\x6f", "\x5b\x61\x6c\151\157\x73\x73\x5d\x20\165\x70\x6c\157\141\144\x20\x73\x75\143\x63\x65\x73\163\x2c\x20\x70\141\x74\x68\x3d" . $path); goto lOiFO; MuKd2: wYaq1: goto MazNY; VHJYQ: } goto uvsS_; wD4jT: vbMuR: goto rDf4E; uvsS_: KPedw: goto wD4jT; kOTus: if (!$paths) { goto vbMuR; } goto fNOXc; rDf4E: } catch (\OSS\Core\OssException $e) { WeUtility::logging("\x77\x61\162\156\x69\156\x67", "\x5b\141\x6c\x69\x6f\163\x73\135\x20\x75\x70\154\x6f\141\144\40\146\x61\x69\154\x65\x64\54\x20\x72\x65\164\75" . $e->getMessage()); } goto m22rW; tvlX2: } public static function stat_day_item_trade() { goto DPDM2; xy9Bz: $sql .= "\x20\x75\156\x69\x61\x63\151\x64\x3d{$_W["\165\x6e\151\141\x63\151\144"]}\x20\101\x4e\x44\40\144\x61\x79\164\151\155\x65\75" . date("\131\155\x64"); goto rUL13; rUL13: pdo_query($sql); goto zaspP; DPDM2: global $_W; goto clxNk; clxNk: $sql = "\125\120\x44\101\x54\105\40" . tablename("\x73\165\160\x65\162\155\x61\x6e\137\150\141\156\144\62\x5f\x73\x74\141\x74") . "\x20\123\x45\124\x20\x69\x74\x65\x6d\137\x74\x72\x61\144\145\x3d\x69\164\x65\x6d\x5f\164\x72\141\x64\x65\53\61\x20\127\110\x45\x52\105\x20"; goto xy9Bz; zaspP: } public static function float_format($num, $len = 2) { goto EZikR; EZikR: $multiplier = pow(10, $len); goto MXDuH; SPIUJ: $result = $arr[0] / $multiplier; goto DC6iV; MXDuH: $arr = explode("\x2e", $num * $multiplier); goto SPIUJ; DC6iV: return sprintf("\x25\56" . $len . "\146", $result); goto jX5uA; jX5uA: } public static function pay($params, $extra = array()) { goto x0JsF; RZy8S: WeUtility::logging("\x74\162\x61\143\145", "\x5b\127\x78\x70\141\171\x3a\160\x61\x79\x5d\x20\162\145\163\x70\157\156\163\145\x3d" . $response); goto vJC7q; yGu2f: $result_code = $xml->result_code ? (string) $xml->result_code : ''; goto DzJap; DzJap: $err_code = $xml->err_code ? (string) $xml->err_code : ''; goto m_VqR; kJMsA: tWlbE: goto iMSDk; bb1AW: $ret = array("\163\x75\x63\143\x65\163\x73" => true, "\160\x61\162\164\156\145\x72\137\164\162\141\144\x65\137\x6e\157" => $xml->partner_trade_no, "\x70\x61\171\155\145\x6e\x74\137\x6e\157" => $xml->payment_no, "\160\x61\171\x6d\145\156\x74\x5f\x74\151\155\145" => $xml->payment_time); goto jS8AQ; KgOhX: tZQJZ: goto YY9Rn; YY9Rn: $return_code = $xml->return_code ? (string) $xml->return_code : ''; goto lspTE; pq789: $xml = @simplexml_load_string($response); goto N_PtZ; obZcu: $headers["\103\x6f\156\x74\145\156\x74\55\x54\x79\x70\x65"] = "\141\160\160\x6c\151\x63\141\164\x69\x6f\156\x2f\x78\x2d\167\167\x77\x2d\x66\x6f\x72\155\55\x75\x72\154\145\156\143\157\144\145\x64"; goto Ipv7Q; N_PtZ: if (!empty($xml)) { goto LbKin; } goto yPwiM; Fu16A: if ($return_code == "\123\x55\103\x43\x45\x53\x53" && $result_code == "\x53\125\x43\x43\105\123\x53") { goto fWmI3; } goto vuRAa; wPBX1: $response = ihttp_request($pay_url, $xml_data, $headers); goto JyWrA; u0IyT: $cert = authcode($_W["\x61\x63\143\x6f\x75\x6e\x74"]["\163\x65\164\x74\x69\x6e\x67"]["\x70\141\171\155\x65\x6e\164"]["\167\145\143\x68\x61\x74\x5f\x72\145\x66\165\x6e\144"]["\x63\145\x72\164"], "\104\x45\103\x4f\104\105"); goto A6GWQ; FQr84: if (!self::$debug) { goto etqJa; } goto IYASR; vuRAa: return $return_code . "\x3a" . $return_msg . "\54" . $err_code . "\x3a" . $err_code_des; goto TTngq; ISEZZ: if (!self::$debug) { goto HgsQY; } goto RZy8S; jJ0ih: selMm: goto px2Yv; Qoiuf: $data = array("\x6d\x63\x68\137\141\x70\x70\x69\144" => $params["\155\x63\150\137\x61\160\160\151\x64"], "\x6d\x63\x68\x69\144" => $params["\x6d\143\150\151\x64"], "\156\157\156\143\x65\x5f\x73\164\x72" => $params["\x6e\157\156\x63\x65\x5f\x73\164\x72"], "\160\141\x72\x74\x6e\x65\x72\x5f\x74\162\x61\144\145\x5f\156\157" => $params["\160\x61\x72\x74\156\145\162\137\x74\x72\141\x64\145\x5f\x6e\x6f"], "\x6f\x70\145\156\151\144" => $params["\157\160\145\x6e\151\x64"], "\x63\x68\x65\143\x6b\137\x6e\141\155\145" => $params["\x63\x68\145\143\x6b\137\156\x61\x6d\x65"], "\162\145\x5f\x75\163\145\162\x5f\x6e\141\x6d\145" => $params["\x72\145\137\165\x73\145\162\x5f\156\141\155\145"], "\x61\x6d\157\x75\156\x74" => $params["\x61\155\157\165\156\x74"] * 100, "\x64\x65\163\x63" => $params["\x64\145\x73\143"], "\x73\160\x62\151\x6c\154\x5f\x63\x72\x65\x61\164\x65\137\x69\160" => $params["\163\x70\x62\151\154\x6c\137\x63\x72\145\141\164\x65\x5f\x69\160"]); goto E7NfD; Gxmoe: file_put_contents($cert_filename, $cert . $key); goto eLODf; m_VqR: $err_code_des = $xml->err_code_des ? (string) $xml->err_code_des : ''; goto Fu16A; LRG2f: LbKin: goto M7BJK; A6GWQ: $key = authcode($_W["\141\143\x63\x6f\165\x6e\x74"]["\163\x65\x74\x74\151\x6e\x67"]["\160\x61\171\x6d\x65\156\164"]["\167\x65\x63\x68\x61\164\x5f\162\x65\146\165\x6e\x64"]["\153\x65\x79"], "\104\105\103\x4f\104\105"); goto Xd6Zi; XBnu1: return "\x5b\x77\170\x70\x61\x79\x2d\x61\160\x69\x3a\160\141\171\135\x20\x72\x65\163\x70\157\x6e\163\145\x20\116\x55\114\114"; goto jJ0ih; ZT2j5: $pay_url = "\x68\164\x74\160\x73\72\x2f\57\141\x70\151\x2e\155\x63\150\56\x77\145\151\170\151\156\x2e\x71\x71\56\x63\157\155\57\x6d\155\x70\141\x79\x6d\x6b\164\164\x72\x61\156\163\x66\145\162\163\x2f\160\x72\x6f\155\x6f\x74\151\x6f\156\57\x74\x72\x61\x6e\163\146\x65\x72\163"; goto wPBX1; jK2Xs: if (!($response == '')) { goto selMm; } goto XBnu1; IYASR: WeUtility::logging("\164\x72\x61\x63\x65", "\x5b\127\x78\x70\141\x79\x3a\160\141\171\x5d\40\x78\x6d\154\137\x64\141\164\x61\75" . $xml_data); goto KhyFH; M7BJK: if (!self::$debug) { goto tZQJZ; } goto pflqJ; aZXCd: fWmI3: goto bb1AW; Xd6Zi: $cert_filename = MODULE_ROOT . "\x64\141\x74\141\x2f" . $_W["\x75\x6e\151\141\143\151\144"] . "\137\167\x65\143\x68\141\164\x5f\x70\141\x79\137\141\x6c\x6c\56\160\x65\x6d"; goto Gxmoe; lspTE: $return_msg = $xml->return_msg ? (string) $xml->return_msg : ''; goto yGu2f; KhyFH: WeUtility::logging("\x74\162\141\143\145", "\x5b\127\170\160\x61\171\72\160\141\x79\x5d\x20\x68\145\x61\x64\145\162\x73\x3d" . var_export($headers, true)); goto LcByV; Ipv7Q: $headers["\103\x55\122\x4c\117\x50\124\137\x53\x53\x4c\x5f\126\x45\x52\x49\106\x59\x50\x45\x45\122"] = false; goto rffcH; o2mbP: $headers = array(); goto obZcu; pflqJ: WeUtility::logging("\164\x72\x61\143\x65", "\x5b\x57\x78\160\141\171\x3a\x70\141\x79\x5d\x20\170\x6d\x6c\x3d" . var_export($xml, true)); goto KgOhX; rffcH: $headers["\103\x55\x52\x4c\117\x50\x54\137\123\123\114\137\x56\105\122\111\106\x59\110\x4f\x53\x54"] = false; goto u0IyT; vJC7q: HgsQY: goto pq789; E7NfD: $sign = self::sign($data, $extra["\163\151\x67\156\x5f\x6b\145\171"]); goto m43zR; m43zR: $xml_data = "\74\170\155\x6c\x3e\74\155\143\x68\x5f\x61\x70\160\151\x64\76{$data["\155\143\x68\137\x61\x70\160\151\x64"]}\74\57\155\143\150\x5f\x61\160\160\x69\144\x3e\74\x6d\x63\x68\x69\x64\76{$data["\x6d\143\x68\151\144"]}\x3c\57\x6d\143\150\151\x64\76\x3c\x6e\157\x6e\x63\145\x5f\163\164\x72\x3e{$data["\156\157\156\143\x65\x5f\x73\x74\x72"]}\74\57\x6e\157\156\143\145\137\163\164\x72\x3e\x3c\160\x61\162\164\156\x65\162\x5f\164\162\141\x64\x65\x5f\156\x6f\76{$data["\x70\x61\162\x74\156\145\x72\137\x74\x72\x61\x64\145\137\156\x6f"]}\x3c\57\x70\x61\162\164\156\145\162\x5f\x74\162\x61\x64\x65\x5f\156\x6f\76\74\157\160\145\156\151\x64\76{$data["\x6f\160\x65\x6e\151\x64"]}\x3c\x2f\157\x70\x65\x6e\x69\x64\x3e\74\x63\x68\x65\x63\x6b\137\156\x61\155\145\76{$data["\x63\150\x65\143\x6b\137\x6e\x61\155\145"]}\x3c\x2f\x63\150\x65\x63\x6b\137\x6e\x61\155\145\x3e\x3c\162\x65\x5f\165\163\x65\x72\x5f\156\x61\x6d\145\76{$data["\162\x65\x5f\165\x73\145\x72\137\x6e\141\x6d\x65"]}\74\x2f\x72\x65\x5f\x75\x73\x65\x72\137\x6e\141\155\x65\76\x3c\141\155\x6f\165\x6e\x74\x3e{$data["\x61\x6d\x6f\x75\156\164"]}\x3c\57\141\x6d\x6f\165\x6e\x74\76\x3c\144\x65\x73\x63\x3e{$data["\x64\145\163\143"]}\x3c\x2f\x64\x65\x73\143\x3e\x3c\x73\160\x62\x69\x6c\x6c\137\x63\162\x65\141\x74\x65\x5f\151\160\76{$data["\163\160\x62\x69\x6c\x6c\x5f\143\162\x65\x61\164\145\x5f\x69\x70"]}\74\57\163\x70\x62\x69\154\154\x5f\x63\162\x65\x61\x74\145\137\151\160\x3e\74\x73\x69\147\156\76{$sign}\74\57\x73\x69\x67\156\76\74\57\170\155\154\x3e"; goto o2mbP; x0JsF: global $_W; goto Qoiuf; px2Yv: $response = $response["\143\x6f\156\x74\x65\x6e\164"]; goto ISEZZ; jS8AQ: return $ret; goto kJMsA; TTngq: goto tWlbE; goto aZXCd; eLODf: $headers["\x43\125\122\114\x4f\x50\x54\x5f\x53\123\114\x43\105\x52\x54"] = $cert_filename; goto FQr84; yPwiM: return "\x5b\167\x78\160\141\x79\x2d\141\160\151\72\160\x61\x79\135\40\x70\141\x72\x73\x65\x20\x78\155\x6c\x20\116\125\x4c\114"; goto LRG2f; JyWrA: @unlink($cert_filename); goto jK2Xs; LcByV: etqJa: goto ZT2j5; iMSDk: } public static function _init_plugin_module($module) { goto zKaZo; AQmXU: return $plugin_module; goto fyCvi; L0awu: return false; goto jejJV; sa6p9: IC3P7: goto AQmXU; zKaZo: $plugin_name = $module["\x70\x6c\x75\147\151\x6e\137\154\x69\163\164"]; goto tsFjH; DNeym: foreach ($plugin_name as $name) { goto GGSFT; lTgpA: $plugin_module[$str] = json_decode(json_encode(WeUtility::createModuleHook($name)), true); goto sb5jW; sb5jW: lAGZ0: goto toRxN; GGSFT: $str = str_replace("\163\x75\x70\x65\x72\155\141\156\x5f\x68\x61\156\x64\62\137", '', $name); goto lTgpA; toRxN: } goto sa6p9; jejJV: zz9xc: goto DNeym; tsFjH: if (!empty($plugin_name)) { goto zz9xc; } goto L0awu; fyCvi: } public static function credit_uplimit($config_credit, $credit) { goto zFNBa; Yb_Wy: return false; goto lhn6i; hCZES: d2vmC: goto G8Mn8; fr3fV: $sql .= "\40\x41\x4e\104\x20\143\x72\145\144\151\x74\x74\171\160\145\75\47\x63\162\145\x64\151\x74\61\47\40\x41\x4e\x44\40\x6d\157\144\165\154\145\75\x27\x73\165\160\145\162\x6d\x61\x6e\x5f\150\x61\x6e\144\62\x27\40\x41\x4e\x44\40\x6e\x75\x6d\40\x3e\40\x30"; goto VyOiH; mI0zf: hbMSl: goto vRryy; zFNBa: global $_W; goto N4SEe; N4SEe: if (!empty($config_credit["\157\160\145\x6e"])) { goto MmwDT; } goto Yb_Wy; gGz6A: $record = pdo_fetch($sql); goto VH80K; lhn6i: MmwDT: goto xMG7V; Yoz_L: $sql .= "\40\101\x4e\104\x20\x75\x69\x64\x3d" . $_W["\x6d\145\155\x62\145\x72"]["\165\151\x64"]; goto gGz6A; G8Mn8: $sql = "\x53\105\114\105\x43\x54\40\x53\x55\x4d\50\x6e\165\x6d\x29\40\101\x53\x20\x6e\165\x6d\40\x46\122\117\x4d\40" . tablename("\155\143\137\143\x72\x65\144\151\164\163\137\x72\x65\x63\x6f\x72\144") . "\x20\127\110\105\122\x45\x20\x75\x6e\151\141\143\x69\x64\75{$_W["\x75\156\x69\141\x63\151\x64"]}"; goto fr3fV; xMG7V: if (!empty($credit)) { goto d2vmC; } goto KNrjY; vRryy: return true; goto ZQo3R; KNrjY: return false; goto hCZES; VyOiH: $sql .= "\x20\x41\x4e\104\40\143\x72\x65\141\x74\145\164\x69\x6d\145\76\75" . strtotime(date("\131\x2d\155\55\144\40\x30\60\72\x30\x30\72\x30\x30", TIMESTAMP)); goto Yoz_L; VH80K: if (!($config_credit["\165\x70\x6c\x69\155\x69\x74"] > 0 && $record["\x6e\165\155"] + $credit > $config_credit["\x75\x70\154\151\155\151\164"])) { goto hbMSl; } goto dQvyD; dQvyD: return false; goto mI0zf; ZQo3R: } public static function payResult($params, $modules) { goto rIh9R; x1Dib: WeUtility::logging("\146\x61\164\141\154", "\x5b\163\165\x70\145\162\x6d\141\156\x5f\150\141\x6e\x64\62\x3a\163\151\164\145\x2e\160\150\160\135\40\160\x61\x79\122\x65\x73\165\154\x74\x3a\40\151\156\x76\141\154\151\x64\x20\x66\x65\145\54\x20\x70\141\x79\x6c\x6f\147\x3d" . var_export($paylog, true) . "\x2c\x20{$order}\x3d" . var_export($order, true)); goto JjEdV; CAZ4r: qXl_T: goto olHw6; HTIgq: goto Jp0c3; goto e5ID8; jiPAI: SupermanHandUtil::send_uniform_msg($message_data, $openid, $uni_tpl_id, $gzh_appid, $url); goto Wz3wm; vX2cN: $ret2 = pdo_update("\163\x75\160\x65\162\155\141\x6e\x5f\x68\x61\156\144\62\x5f\151\x74\x65\155", array("\163\x74\141\164\165\x73" => $status, "\163\x74\x6f\143\x6b\40\x2d\x3d" => $order["\164\x6f\x74\141\x6c"]), array("\x69\144" => $order["\x69\x74\145\155\x69\144"])); goto g1Fw8; cv3PA: WeUtility::logging("\146\x61\x74\141\154", "\x5b\x73\165\160\145\162\x6d\x61\x6e\x5f\x68\x61\156\144\62\72\x75\x74\151\x6c\x2e\x63\154\x61\163\x73\x2e\160\150\x70\135\x20\x70\x61\x79\122\x65\163\165\154\164\x3a\x20\160\141\171\154\157\x67\x20\x69\163\40\156\165\154\x6c\54\40\164\x69\x64\x3d{$params["\164\x69\x64"]}"); goto E87CB; yFS0b: $order = pdo_get("\163\x75\x70\x65\162\155\x61\x6e\137\x68\141\156\144\x32\x5f\160\x6f\x73\x69\164\x69\x6f\x6e\137\157\x72\x64\x65\162\x5f\154\x6f\147", array("\151\144" => $logid)); goto guQcs; tfMHy: if (!($paylog["\146\145\x65"] != $order["\160\x72\x69\x63\x65"] || $paylog["\x73\164\x61\164\165\163"] != 1)) { goto MlhpQ; } goto x1Dib; vZW9o: if (!($ret1 === false || $ret2 === false)) { goto C1tfJ; } goto inW5R; FTEU0: $status = $item["\163\164\x6f\x63\153"] - $order["\164\157\164\x61\154"] > 0 ? 1 : 2; goto vX2cN; Jzld1: WeUtility::logging("\146\x61\164\141\x6c", "\133\163\165\x70\145\x72\155\x61\x6e\137\x68\141\156\144\x32\72\165\x74\x69\x6c\56\x63\154\141\x73\163\x2e\x70\x68\160\x5d\x20\x70\141\171\x52\x65\x73\x75\x6c\164\x3a\x20\160\141\x79\x65\144\54\40\157\162\144\145\x72\75" . var_export($order, true)); goto kHoQI; CQ8KV: exit; goto v0m95; H3KXt: if (!($params["\162\145\163\x75\x6c\x74"] == "\x73\x75\x63\x63\x65\163\x73" && $params["\x66\x72\x6f\x6d"] == "\156\x6f\x74\151\146\171")) { goto pjO3B; } goto AIQDg; JdV1I: $ret2 = pdo_update("\163\165\160\x65\162\155\x61\156\137\150\141\x6e\x64\x32\137\x70\x6f\x73\x69\164\x69\157\156\137\157\162\x64\x65\162\x5f\154\157\147", array("\x61\x75\x64\151\164" => 1, "\x61\165\x64\x69\x74\x74\x69\155\145" => TIMESTAMP, "\145\x78\x70\x69\162\145\164\x69\155\x65" => strtotime("\x2b" . intval($order["\164\157\x74\x61\x6c"]) . "\x64\x61\x79")), array("\x69\x64" => $order["\151\x64"])); goto vZW9o; vngek: $uni_tpl_id = $modules["\143\x6f\x6e\x66\x69\147"]["\x74\x6d\160\154"]["\x62\x75\x79"]["\x74\x6d\x70\154\x5f\151\144"]; goto JxfvP; XsI4s: WeUtility::logging("\146\141\164\141\x6c", "\x5b\163\165\x70\x65\x72\155\141\x6e\x5f\x68\141\x6e\144\x32\x3a\163\x69\164\x65\56\x70\150\160\135\40\160\141\171\122\145\x73\x75\x6c\164\x3a\40\160\141\171\145\144\54\x20\x6f\x72\144\x65\162\x3d" . var_export($order, true)); goto fcbIj; fVQz8: NDQIY: goto smIuw; JjEdV: return; goto DkZLY; vS3mM: $message_data = array("\x66\151\162\x73\x74" => array("\x76\141\154\x75\x65" => "\xe6\202\250\xe5\217\221\345\270\x83\xe7\x9a\x84" . $item["\x74\x69\x74\154\x65"] . "\347\211\251\xe5\x93\201\xe5\xb7\262\350\xa2\253\350\xb4\xad\344\271\xb0", "\143\x6f\154\x6f\x72" => "\x23\61\67\63\61\67\67"), "\x6b\x65\x79\x77\x6f\x72\x64\x31" => array("\x76\141\154\165\x65" => $order["\157\x72\x64\x65\162\163\156"]), "\153\145\171\x77\x6f\162\144\x32" => array("\166\141\154\x75\145" => $item["\160\x72\151\x63\x65"] . "\xe5\x85\x83"), "\153\145\171\x77\x6f\x72\144\63" => array("\x76\x61\154\x75\145" => date("\131\x2d\155\x2d\x64\40\110\x3a\151\x3a\163", $item["\x63\162\145\141\164\x65\164\x69\x6d\145"])), "\162\145\155\x61\x72\x6b" => array("\166\141\x6c\165\x65" => "\350\xaf\267\345\xb0\xbd\345\xbf\253\345\217\x91\350\264\247\xe6\x88\226\xe8\x81\x94\xe7\xb3\xbb\xe5\xae\242\xe6\210\xb7\xe8\207\xaa\xe6\x8f\220", "\143\x6f\x6c\x6f\x72" => "\x23\61\x37\63\x31\x37\x37")); goto jiPAI; P16AE: if (is_numeric($params["\x74\x69\x64"])) { goto u0C2k; } goto TvBkl; FKCAV: u0C2k: goto z3r_b; W8Q5y: WeUtility::logging("\x64\x65\142\x75\x67", "\133\x73\165\160\145\162\155\x61\156\137\x68\141\156\144\x32\72\x75\x74\151\154\x2e\x63\x6c\x61\x73\x73\x2e\160\150\x70\x5d\40\x70\141\x79\122\145\x73\165\154\164\x3a\40\x70\x61\x72\x61\x6d\163\x3d" . var_export($params, true)); goto Gys8f; HSsBN: Zz6BT: goto P16AE; e5ID8: r8gJC: goto OwVLK; soaWU: $ret1 = pdo_update("\163\165\160\x65\x72\x6d\x61\x6e\x5f\150\x61\156\144\62\137\151\x74\x65\155", array("\160\x61\x79\137\160\x6f\163\x69\x74\151\157\x6e" => 1, "\x73\x65\164\137\x74\x6f\x70\137\146\151\x65\154\144\x73" => $order["\163\145\164\x5f\164\157\160\x5f\146\x69\x65\154\144\163"]), array("\x69\144" => $order["\x69\164\145\x6d\x69\x64"])); goto JdV1I; E87CB: return; goto HSsBN; xkaMy: $logid = $arr[1]; goto FKCAV; czN4X: $ret1 = pdo_update("\x73\165\160\145\162\155\141\156\x5f\150\x61\x6e\144\62\137\x6f\x72\144\145\162", $data, array("\151\x64" => $order["\151\144"])); goto LwhIp; dETl1: return; goto CAZ4r; kvFQy: exit; goto tmU3a; Wz3wm: piLYd: goto E7qEu; D2ahQ: Jp0c3: goto sGTsy; Gys8f: $paylog = pdo_get("\x63\157\x72\x65\137\160\x61\x79\154\x6f\x67", array("\164\151\144" => $params["\164\151\x64"], "\155\x6f\x64\165\x6c\x65" => "\163\165\160\145\162\x6d\141\156\137\150\x61\156\x64\x32")); goto ObISy; v0m95: wkPR_: goto D2ahQ; fcbIj: return; goto sKUel; fma4o: return; goto snxt1; ctzli: if (!($order["\x73\164\x61\x74\x75\163"] != 0)) { goto c52Ur; } goto Jzld1; moVaP: if (!($ret === false)) { goto qXl_T; } goto kq8wf; M1YWG: WeUtility::logging("\x66\x61\164\141\154", "\133\x73\165\x70\x65\162\x6d\x61\x6e\x5f\x68\141\156\144\62\135\40\x70\141\x79\x52\145\163\165\x6c\x74\x3a\165\160\144\141\164\145\40\x69\x74\x65\155\40\146\x61\151\154\x65\x64\x2c\40\154\x6f\x67\151\x64\x3d{$order["\x69\144"]}\54\x20\x64\141\x74\x61\75" . var_export($data, true)); goto pa4NG; pa4NG: return; goto NF6E6; uj_Cs: $data = array("\163\164\141\164\165\163" => 1, "\160\141\171\156\x6f" => $params["\x74\x61\x67"]["\x74\162\x61\x6e\x73\141\143\164\x69\157\156\x5f\x69\144"], "\x70\141\171\x74\151\155\145" => $params["\160\x61\x79\x74\x69\x6d\145"]); goto czN4X; kHoQI: return; goto cBdLq; GIPqu: WeUtility::logging("\x66\141\164\141\x6c", "\133\x73\165\160\x65\x72\155\141\156\x5f\x68\141\156\144\x32\72\165\164\151\x6c\x2e\143\154\141\163\163\56\160\x68\160\135\40\160\141\x79\x52\x65\x73\x75\x6c\164\72\40\x69\156\x76\x61\154\151\x64\40\x66\145\145\x2c\40\x70\x61\171\x6c\157\x67\75" . var_export($paylog, true) . "\x2c\x20{$order}\75" . var_export($order, true)); goto Qu6k_; ObISy: if (!empty($paylog)) { goto Zz6BT; } goto cv3PA; sKUel: kZTHU: goto QYW9_; guQcs: if (!($paylog["\x66\x65\x65"] != $order["\x61\154\154\137\x70\x72\x69\x63\x65"] || $paylog["\x73\x74\x61\x74\x75\163"] != 1)) { goto Zo744; } goto GIPqu; g1Fw8: if (!($ret2 === false)) { goto THw8g; } goto M1YWG; LRnG8: $ret = pdo_update("\163\x75\x70\145\x72\x6d\x61\x6e\x5f\150\141\x6e\144\62\137\160\157\x73\151\x74\x69\157\x6e\137\157\x72\144\x65\162\137\x6c\x6f\147", $data, array("\151\x64" => $order["\151\144"])); goto moVaP; z3r_b: if ($arr[0] == "\163\165\160\x65\x72\155\x61\x6e\x5f\150\x61\x6e\144\x32\137\167\145\143\x68\x61\x74") { goto r8gJC; } goto yFS0b; cBdLq: c52Ur: goto H3KXt; olHw6: if (!($modules["\x63\157\x6e\x66\151\147"]["\x62\141\x73\145"]["\x74\157\160\137\141\165\x64\151\x74"] == 0)) { goto NDQIY; } goto soaWU; LwhIp: if (!($ret1 === false)) { goto st4T6; } goto IyhzP; tmU3a: pjO3B: goto HTIgq; smIuw: WeUtility::logging("\151\x6e\x66\x6f", "\x5b\163\x75\160\x65\162\x6d\x61\x6e\x5f\x68\x61\x6e\144\x32\x3a\165\164\x69\154\x2e\143\x6c\141\x73\163\56\x70\x68\160\x5d\40\160\x61\x79\122\x65\163\165\154\x74\72\40\163\165\143\143\x65\x73\163\x2c\x20\x6c\157\147\151\x64\75{$order["\151\144"]}"); goto kvFQy; OwVLK: $order = pdo_get("\x73\x75\x70\x65\162\155\141\156\x5f\150\x61\x6e\144\x32\137\x6f\162\x64\x65\162", array("\151\x64" => $logid)); goto tfMHy; y3Ap6: Zo744: goto ctzli; Qu6k_: return; goto y3Ap6; TvBkl: $arr = explode("\x3a", $params["\164\x69\144"]); goto xkaMy; DkZLY: MlhpQ: goto YzDkr; JxfvP: $gzh_appid = $modules["\x63\157\x6e\x66\151\147"]["\155\151\156\x69\160\x67"]["\x62\151\x6e\x64\137\147\x7a\x68"]["\141\x70\x70\151\144"]; goto k87hp; rIh9R: global $_W; goto W8Q5y; inW5R: WeUtility::logging("\151\x6e\x66\157", "\x5b\163\165\x70\145\162\155\x61\156\137\x68\x61\156\144\x32\x3a\x75\x74\x69\x6c\56\143\154\x61\x73\163\x2e\x70\x68\x70\135\x20\165\x70\x64\141\x74\x65\x20\x74\141\142\154\x65\40\146\141\x69\x6c\x65\x64\54\40\x6f\162\x64\x65\x72\x3d" . var_export($order, true)); goto fma4o; hFUM1: $openid = SupermanHandUtil::uid2openid($item["\x73\x65\154\154\x65\x72\137\165\x69\144"]); goto S9__O; kq8wf: WeUtility::logging("\x66\x61\164\x61\154", "\133\x73\x75\x70\x65\162\155\x61\x6e\137\150\141\x6e\144\x32\72\x75\164\151\x6c\56\143\x6c\141\163\x73\x2e\x70\150\x70\135\x20\160\x61\x79\x52\145\163\x75\x6c\x74\x3a\40\x6c\157\x67\151\144\x3d{$order["\x69\x64"]}\54\40\144\x61\x74\141\x3d" . var_export($data, true)); goto dETl1; AIQDg: $data = array("\163\x74\x61\164\165\163" => 1, "\x70\141\171\x6e\157" => $params["\164\x61\147"]["\x74\x72\x61\x6e\x73\x61\x63\164\151\x6f\x6e\x5f\151\x64"], "\160\x61\171\164\x69\155\145" => $params["\160\141\171\164\151\x6d\145"]); goto LRnG8; UrqsI: return; goto Ab01w; NF6E6: THw8g: goto hFUM1; WjgVY: $item = pdo_get("\163\165\x70\x65\162\155\x61\156\137\150\141\x6e\x64\x32\x5f\151\164\x65\x6d", array("\165\x6e\x69\141\143\x69\144" => $_W["\165\156\x69\141\143\151\x64"], "\151\x64" => $order["\x69\x74\x65\x6d\x69\x64"])); goto uj_Cs; YzDkr: if (!($order["\x73\x74\x61\164\165\x73"] != 0)) { goto kZTHU; } goto XsI4s; Ab01w: st4T6: goto FTEU0; IyhzP: WeUtility::logging("\x66\x61\164\141\154", "\133\x73\x75\x70\x65\x72\155\x61\156\137\150\141\x6e\144\x32\x5d\x20\160\141\171\122\x65\163\165\154\164\72\x75\x70\x64\141\164\145\x20\157\162\144\145\162\x20\x66\141\x69\154\145\x64\54\40\x20\154\157\x67\151\144\x3d{$order["\151\x64"]}\x2c\40\144\x61\164\141\x3d" . var_export($data, true)); goto UrqsI; S9__O: $url = "\x70\141\147\x65\163\57\x6d\171\x5f\x6f\162\x64\145\x72\x2f\151\x6e\x64\145\x78\77\164\171\x70\145\75\x73\x65\154\x6c"; goto vngek; E7qEu: WeUtility::logging("\x69\x6e\146\157", "\x5b\x73\x75\160\x65\162\x6d\x61\x6e\137\150\141\156\x64\x32\72\x73\151\164\145\x2e\160\150\160\x5d\x20\x70\141\x79\x52\145\x73\165\x6c\164\x3a\40\x73\165\x63\x63\145\163\x73\x2c\x20\x6c\x6f\147\151\144\x3d{$order["\x69\144"]}"); goto CQ8KV; k87hp: if (!(!empty($uni_tpl_id) && !empty($gzh_appid))) { goto piLYd; } goto vS3mM; snxt1: C1tfJ: goto fVQz8; QYW9_: if (!($params["\162\145\163\x75\154\164"] == "\x73\x75\143\x63\x65\x73\x73" && $params["\x66\x72\x6f\155"] == "\x6e\157\164\151\146\x79")) { goto wkPR_; } goto WjgVY; sGTsy: } public static function superman_wxpay_build($params, $module) { goto yVFvg; M4FTr: return error(1, "\xe6\250\xa1\345\x9d\x97\xe4\xb8\x8d\xe5\xad\x98\xe5\x9c\xa8"); goto vil2N; EKIW9: if (!(!empty($paylog) && $paylog["\163\x74\141\x74\165\x73"] != "\x30")) { goto smb9l; } goto J01EP; yVFvg: global $_W; goto GhfKZ; zzLVr: $uniontid = date("\x59\x6d\x64\110\151\x73") . $moduleid . random(8, 1); goto Ay93s; HZFU7: NmZbc: goto xeyz2; Ay93s: $wxapp_uniacid = $_W["\165\156\x69\x61\143\x69\144"]; goto BWJtD; Tc59E: AEKpR: goto EKIW9; YYOqX: $_W["\x6f\x70\x65\156\x69\144"] = $paylog["\x6f\160\x65\x6e\x69\144"]; goto ta5kl; hku1j: smb9l: goto pxACY; sJ76Q: $result = wechat_build($data, $wechat_payment); goto ZTVva; pxACY: if (!(!empty($paylog) && empty($paylog["\165\156\x69\x6f\156\164\151\144"]))) { goto v1eGC; } goto Onrpx; Onrpx: pdo_update("\x63\x6f\162\x65\137\x70\141\171\154\157\147", array("\x75\156\x69\157\156\164\x69\x64" => $uniontid), array("\160\154\151\x64" => $paylog["\160\154\151\x64"])); goto ZaqXC; rM4jP: $moduleid = empty($module["\x6d\x69\x64"]) ? "\x30\60\x30\x30\60\x30" : sprintf("\45\x30\66\x64", $module["\155\x69\144"]); goto zzLVr; xeyz2: return $result; goto WAuwS; jXo2g: $wechat_payment = array("\141\160\x70\x69\144" => $params["\141\x70\x70\151\144"], "\x73\x69\147\x6e\x6b\145\x79" => $setting["\x70\x61\171\155\x65\x6e\x74"]["\x77\x65\143\x68\141\164"]["\x73\x69\147\x6e\153\x65\171"], "\x6d\143\x68\151\144" => $setting["\160\141\171\155\145\x6e\164"]["\167\145\x63\x68\141\164"]["\x6d\x63\x68\151\144"], "\x76\x65\x72\x73\151\x6f\x6e" => 2); goto sJ76Q; PIt8V: load()->model("\x61\143\x63\x6f\165\x6e\x74"); goto pe1PD; BWJtD: $paylog = pdo_get("\x63\157\162\x65\x5f\160\x61\x79\154\x6f\147", array("\165\156\151\x61\x63\x69\144" => $wxapp_uniacid, "\x6d\x6f\144\165\154\x65" => $module["\x6e\x61\155\145"], "\x74\151\x64" => $params["\x74\151\x64"])); goto k122v; WiNJw: $paylog["\x70\x6c\x69\144"] = pdo_insertid(); goto Tc59E; GhfKZ: load()->model("\160\x61\171\155\x65\x6e\x74"); goto PIt8V; ZaqXC: $paylog["\165\156\151\157\x6e\x74\151\x64"] = $uniontid; goto QqFFS; QqFFS: v1eGC: goto YYOqX; J01EP: return error(1, "\xe8\xbf\231\344\270\252\350\xae\242\345\215\225\xe5\xb7\262\xe7\xbb\217\346\224\257\xe4\xbb\230\346\x88\220\345\212\237\x2c\x20\xe4\270\215\351\x9c\x80\xe8\xa6\x81\xe9\207\215\345\xa4\215\xe6\224\xaf\344\xbb\x98\x2e"); goto hku1j; ta5kl: $data = array("\164\151\144" => $paylog["\x74\x69\144"], "\x66\145\145" => $paylog["\143\141\162\x64\137\146\145\x65"], "\x75\x73\145\x72" => $paylog["\x6f\160\x65\x6e\151\x64"], "\x75\x6e\x69\157\x6e\x74\151\144" => $paylog["\165\x6e\151\x6f\156\x74\x69\x64"], "\x74\151\164\154\145" => $params["\164\x69\x74\x6c\145"]); goto nCyKj; nCyKj: $setting = uni_setting($wxapp_uniacid, array("\160\141\171\155\145\156\x74")); goto jXo2g; vOlA9: $paylog = array("\165\x6e\x69\x61\x63\151\144" => $wxapp_uniacid, "\141\143\x69\x64" => $wxapp_uniacid, "\x74\171\x70\145" => "\x77\x65\143\x68\x61\164", "\x6f\x70\x65\x6e\x69\144" => $params["\x75\163\145\x72"], "\x6d\x6f\x64\x75\154\x65" => $module["\156\141\x6d\145"], "\x74\x69\144" => $params["\164\151\x64"], "\165\x6e\x69\157\156\x74\x69\144" => $uniontid, "\146\145\x65" => floatval($params["\146\145\145"]), "\143\x61\162\x64\137\x66\145\145" => floatval($params["\146\x65\145"]), "\x73\164\141\x74\165\163" => "\60", "\151\x73\x5f\x75\x73\x65\143\x61\x72\x64" => "\x30", "\164\141\147" => iserializer(array("\x61\x63\x69\144" => $_W["\x61\x63\x69\x64"], "\165\151\x64" => $_W["\155\x65\155\142\x65\x72"]["\x75\x69\144"]))); goto xFGbX; qViHT: if (!(empty($params) || !array_key_exists($module["\x6e\141\x6d\145"], $moduels))) { goto j7Na_; } goto M4FTr; vil2N: j7Na_: goto rM4jP; ZTVva: if (!is_error($result)) { goto NmZbc; } goto EWiJP; xFGbX: pdo_insert("\143\157\162\145\x5f\x70\x61\171\x6c\157\x67", $paylog); goto WiNJw; pe1PD: $moduels = uni_modules(); goto qViHT; k122v: if (!empty($paylog)) { goto AEKpR; } goto vOlA9; EWiJP: WeUtility::logging("\x66\x61\x74\141\154", "\x5b\163\165\x70\145\162\155\x61\x6e\x5f\x77\170\x70\x61\x79\137\142\165\x69\154\144\135\40\146\x61\151\154\x65\144\54\40\162\x65\x73\165\x6c\x74\75" . var_export($result, true) . "\x2c\40\x64\141\164\x61\75" . var_export($data, true) . "\x2c\x20\x77\x65\143\150\141\x74\75" . var_export($wechat_payment, true)); goto HZFU7; WAuwS: } public static function order_refund($params, $extra = array()) { goto CGjD_; oxfnl: $cert_filename = MODULE_ROOT . "\57\x64\x61\x74\141\57" . $_W["\x75\x6e\x69\x61\143\151\x64"] . "\137\167\x65\143\150\141\164\137\x72\145\x66\x75\156\x64\x5f\141\x6c\x6c\56\160\x65\155"; goto T9k4W; kfUoj: goto YC2HN; goto x2THW; mbMpj: d0zDv: goto hwHeA; qS2uO: $headers = array(); goto nw1_W; jOkUG: WeUtility::logging("\x66\x61\x74\x61\154", "\133\x75\x74\151\154\x2e\143\x61\x6c\x73\163\x2e\x70\x68\x70\x2c\x20\x57\170\x70\x61\x79\x3a\x72\145\x66\165\x6e\144\x5d\40\162\x65\163\160\x6f\156\163\x65\x3d" . var_export($response, true)); goto mvxXB; jldm1: bQ5ir: goto qOL9y; BIxJD: $result_code = $xml->result_code ? (string) $xml->result_code : ''; goto Fo7JY; YpWYD: $err_code_des = $xml->err_code_des ? (string) $xml->err_code_des : ''; goto SBwwK; GQo9y: $sign = self::sign($data, $extra["\x73\x69\147\156\137\153\145\x79"]); goto OyoIX; Mgnhw: if (!empty($xml)) { goto Pv__D; } goto EWEMY; OyoIX: $xml_data .= "\74\x73\151\147\x6e\76{$sign}\x3c\x2f\163\x69\147\x6e\x3e"; goto vbSZ_; m5BZI: $data["\162\145\x66\165\156\x64\137\x61\x63\143\157\x75\x6e\x74"] = "\x52\105\x46\125\116\104\137\x53\117\125\122\103\105\137\122\x45\x43\x48\101\122\x47\105\137\106\x55\x4e\x44\x53"; goto jldm1; hwHeA: $response = $response["\x63\x6f\156\164\145\x6e\x74"]; goto V4RGD; Dm11p: return $return_code . "\72" . $return_msg . "\x2c" . $err_code . "\x3a" . $err_code_des; goto kfUoj; YY2Ql: $return_code = $xml->return_code ? (string) $xml->return_code : ''; goto onv8G; Fo7JY: $err_code = $xml->err_code ? (string) $xml->err_code : ''; goto YpWYD; eTAK9: if (!($params["\x72\145\x66\165\x6e\x64\x5f\141\x63\143\157\x75\x6e\x74"] == 2)) { goto bQ5ir; } goto m5BZI; AJEMG: iPV2R: goto GQo9y; CGjD_: global $_W; goto dwbhA; W4Y1g: return $response; goto XJL7e; KfGGb: @unlink($cert_filename); goto BZOnY; nw1_W: $headers["\103\x6f\x6e\164\x65\x6e\164\55\x54\x79\x70\x65"] = "\x61\x70\x70\154\x69\143\x61\x74\x69\x6f\156\57\170\55\x77\167\x77\55\146\x6f\162\x6d\55\x75\x72\154\145\156\143\157\x64\145\x64"; goto opm7x; x2THW: xMEMD: goto xlLEw; Xfeme: $headers["\x43\x55\x52\114\x4f\x50\124\137\123\x53\x4c\x43\x45\122\x54"] = $cert_filename; goto H8Wci; XJL7e: Pv__D: goto YY2Ql; jJCr2: $cert = authcode($_W["\141\x63\x63\x6f\x75\156\x74"]["\x73\x65\x74\x74\151\x6e\147"]["\x70\141\x79\x6d\x65\156\164"]["\x77\145\x63\x68\x61\x74\x5f\162\145\146\x75\x6e\x64"]["\143\145\x72\x74"], "\x44\105\103\117\x44\105"); goto Ily6s; SBwwK: if ($return_code == "\123\x55\x43\x43\x45\123\123" && $result_code == "\x53\125\103\103\x45\123\123") { goto xMEMD; } goto Dm11p; opm7x: $headers["\x43\125\x52\x4c\117\x50\124\137\123\123\x4c\x5f\126\105\x52\111\x46\x59\120\105\x45\122"] = false; goto O_ik9; dwbhA: $data = array("\141\x70\160\151\x64" => $params["\x61\x70\160\151\144"], "\155\143\x68\137\151\x64" => $params["\x6d\x63\x68\137\x69\x64"], "\156\x6f\x6e\x63\x65\x5f\163\x74\162" => $params["\x6e\157\x6e\143\x65\x5f\163\164\162"], "\x74\162\x61\156\163\141\143\x74\x69\x6f\x6e\137\x69\144" => $params["\164\162\141\x6e\x73\141\x63\164\151\157\156\x5f\151\144"], "\157\x75\x74\137\x72\x65\x66\x75\x6e\144\137\156\157" => $params["\x6f\165\164\137\x72\x65\x66\165\156\x64\x5f\156\157"], "\x74\157\x74\x61\154\x5f\146\x65\x65" => floatval($params["\164\157\x74\141\x6c\x5f\146\145\145"]) * 100, "\x72\145\146\x75\156\x64\x5f\146\145\145" => floatval($params["\162\145\146\x75\x6e\x64\x5f\x66\145\145"]) * 100, "\x6f\x70\x5f\x75\163\x65\162\x5f\x69\144" => $params["\x6f\160\x5f\x75\x73\x65\x72\x5f\151\x64"], "\162\145\146\x75\156\144\137\141\143\143\x6f\165\x6e\x74" => "\122\105\x46\125\x4e\x44\137\x53\x4f\125\122\x43\x45\137\125\116\x53\x45\124\124\114\105\104\137\x46\125\x4e\x44\123"); goto eTAK9; onv8G: $return_msg = $xml->return_msg ? (string) $xml->return_msg : ''; goto BIxJD; BZOnY: if (!is_error($response)) { goto d0zDv; } goto jOkUG; xlLEw: $ret = array("\x73\165\143\x63\x65\x73\x73" => true, "\x72\x65\146\x75\x6e\x64\137\x69\144" => (string) $xml->refund_id, "\157\165\164\137\162\145\x66\x75\x6e\144\137\156\157" => (string) $xml->out_refund_no); goto mwzj4; mvxXB: return $response; goto mbMpj; UiizU: foreach ($data as $k => $v) { $xml_data .= "\74{$k}\76{$v}\74\57{$k}\x3e"; COyIg: } goto AJEMG; O_ik9: $headers["\x43\x55\x52\114\x4f\120\124\137\123\123\114\x5f\x56\105\x52\111\x46\x59\x48\x4f\123\124"] = false; goto jJCr2; Ily6s: $key = authcode($_W["\x61\143\x63\157\x75\x6e\x74"]["\x73\145\x74\x74\151\x6e\x67"]["\x70\x61\171\155\x65\x6e\164"]["\167\145\x63\x68\141\164\x5f\162\x65\146\165\156\x64"]["\x6b\145\171"], "\x44\105\103\x4f\104\x45"); goto oxfnl; vbSZ_: $xml_data .= "\74\x2f\170\155\x6c\76"; goto qS2uO; Qt67b: return $ret; goto ogNil; mwzj4: WeUtility::logging("\164\x72\141\143\x65", "\x5b\x75\x74\x69\154\56\143\141\x6c\163\x73\56\160\150\x70\x2c\40\x57\x78\x70\x61\x79\x3a\162\x65\146\x75\156\x64\135\x20\x24\162\145\164\x3d" . var_export($ret, true)); goto Qt67b; T9k4W: file_put_contents($cert_filename, $cert . $key); goto Xfeme; ogNil: YC2HN: goto yECBF; qOL9y: $xml_data = "\74\x78\x6d\154\76"; goto UiizU; j5P9D: $response = ihttp_request($refund_url, $xml_data, $headers); goto KfGGb; EWEMY: WeUtility::logging("\x66\141\x74\x61\x6c", "\133\165\164\x69\x6c\56\x63\141\154\x73\163\x2e\x70\x68\160\x2c\x20\x57\x78\160\141\x79\x3a\x72\x65\146\165\x6e\144\135\x20\x72\145\163\x70\x6f\156\163\x65\75" . var_export($response, true)); goto W4Y1g; V4RGD: $xml = @simplexml_load_string($response); goto Mgnhw; H8Wci: $refund_url = "\150\x74\x74\160\x73\72\x2f\x2f\x61\160\151\x2e\155\x63\x68\56\167\145\151\x78\x69\x6e\56\161\161\56\143\x6f\155\x2f\x73\145\x63\141\160\151\x2f\x70\141\171\x2f\x72\x65\146\x75\x6e\x64"; goto j5P9D; yECBF: } public static function sign($data, $sign_key) { goto AeR8s; XUBdM: $data_str = ''; goto HCdXN; lplXI: $sign = strtoupper(md5($data_str)); goto w5ViX; AeR8s: ksort($data); goto XUBdM; GcH1M: $data_str .= "\153\145\171\75" . $sign_key; goto lplXI; w5ViX: return $sign; goto xKHyM; HCdXN: foreach ($data as $k => $v) { goto Mms_x; tetNg: $data_str .= "{$k}\75{$v}\x26"; goto mKKj2; Mms_x: if (!($v == '' || $k == "\x73\151\147\x6e")) { goto FGJTu; } goto P2Ltu; mQbX0: FGJTu: goto tetNg; mKKj2: A6YOJ: goto Qfe_k; P2Ltu: goto A6YOJ; goto mQbX0; Qfe_k: } goto HN2Uq; HN2Uq: yWUR4: goto GcH1M; xKHyM: } public static function location_transition($lat, $lng, $key) { goto vw2XH; Mu3qD: if (!is_error($response)) { goto zfnee; } goto M_2hw; t_dC8: icX7X: goto xFcOH; EEAQ3: WeUtility::logging("\x66\x61\164\141\x6c", "\133\147\145\164\x20\x61\x64\144\x72\145\x73\163\137\143\157\x6d\160\157\156\145\156\164\x20\x66\141\x69\x6c\x65\x64\135\x2c\x20\x72\x65\163\165\154\164\x3d" . var_export($result, true)); goto dJXla; dJXla: if (!($result["\163\x74\x61\x74\x75\x73"] == 112)) { goto icX7X; } goto Ys3m9; ywD_A: $url = "\150\164\x74\160\163\x3a\x2f\x2f\141\x70\x69\163\56\155\x61\x70\x2e\161\x71\56\143\x6f\155\x2f\167\x73\x2f\x67\x65\157\x63\x6f\144\145\x72\x2f\166\61\x2f\x3f\x6c\157\143\141\x74\x69\x6f\x6e\x3d" . $lat . "\x2c" . $lng . "\x26\x6b\145\x79\x3d{$key}" . "\x26\147\145\164\137\160\x6f\151\75\x31"; goto Pc6S_; xFcOH: return; goto XTZkW; iDm4z: $data["\144\x69\x73\x74\162\151\143\164"] = $result["\162\145\x73\x75\154\x74"]["\x61\x64\144\162\x65\163\163\x5f\143\157\x6d\160\x6f\156\145\156\x74"]["\144\151\x73\164\162\x69\x63\164"]; goto aTk7_; Ys3m9: return $result["\155\x65\163\163\x61\147\145"]; goto t_dC8; nu3_a: $ad_level_1 = $result["\x72\145\163\165\154\164"]["\141\144\x64\x72\145\163\x73\x5f\143\x6f\x6d\160\x6f\x6e\x65\156\x74"]["\x61\x64\137\154\145\166\x65\x6c\x5f\61"]; goto qc9it; Pc6S_: $response = ihttp_get($url); goto Mu3qD; b2ZO7: $data["\x70\x6f\x69\163"] = $result["\x72\145\163\x75\x6c\164"]["\x70\157\x69\163"]; goto nu3_a; qudig: if (!$ad_level_1) { goto kbxtz; } goto MMF6I; XTZkW: tkYDx: goto Pyezb; bcu4g: kbxtz: goto mqKUQ; yZ7uE: zfnee: goto JdIbC; qc9it: $ad_level_2 = $result["\162\145\x73\165\154\x74"]["\x61\x64\x64\162\x65\x73\x73\137\143\x6f\155\x70\157\x6e\x65\x6e\164"]["\141\144\x5f\154\145\166\145\x6c\x5f\x32"]; goto qudig; MMF6I: $data["\x70\162\157\166\x69\x6e\x63\145"] = $ad_level_1; goto Zjyro; M_2hw: WeUtility::logging("\146\141\164\x61\154", "\x5b\147\x65\164\40\x61\144\144\162\x65\163\163\137\143\x6f\x6d\x70\x6f\156\x65\156\x74\40\x66\x61\x69\x6c\x65\144\135\54\40\162\x65\163\x70\157\156\x73\145\75" . var_export($response, true)); goto TW6lq; JdIbC: $result = @json_decode($response["\143\x6f\x6e\x74\x65\156\164"], true); goto SmLA2; TW6lq: return; goto yZ7uE; mqKUQ: return $data; goto DLALA; SmLA2: if (!($result["\x73\164\141\164\165\163"] != 0)) { goto tkYDx; } goto EEAQ3; Pyezb: $data["\160\162\157\166\151\156\143\x65"] = $result["\x72\x65\163\x75\x6c\x74"]["\x61\144\x64\x72\x65\163\x73\137\143\x6f\155\x70\157\156\145\156\x74"]["\160\162\x6f\x76\151\x6e\x63\145"]; goto eQMo1; aTk7_: $data["\x61\x64\x64\162\x65\x73\163"] = $result["\x72\x65\x73\165\x6c\164"]["\x61\x64\x64\x72\145\163\x73"]; goto b2ZO7; Zjyro: $data["\x63\151\x74\171"] = $ad_level_2; goto bcu4g; vw2XH: $key = $key ? $key : "\x48\x50\115\x42\x5a\55\x54\x58\x56\x4b\x55\55\x50\x35\x34\x56\125\x2d\64\x54\x35\x33\64\x2d\x44\x59\116\113\124\x2d\x4c\x58\106\x4e\x46"; goto YUCNF; YUCNF: $data = array(); goto ywD_A; eQMo1: $data["\x63\x69\164\171"] = $result["\162\x65\163\165\154\x74"]["\x61\144\x64\x72\145\x73\x73\137\x63\157\155\x70\x6f\x6e\x65\x6e\164"]["\x63\x69\164\171"]; goto iDm4z; DLALA: } public static function is_point_in_polygon($point, $pts) { goto TnkAO; OaYOL: goto n8HlP; goto SBxwC; m0Hvp: if (!($p["\154\156\147"] < $xinters)) { goto wXk6x; } goto YGfs3; LVpM9: if ($p["\x6c\141\x74"] > min($p1["\x6c\x61\x74"], $p2["\154\x61\x74"]) && $p["\x6c\x61\164"] < max($p1["\154\x61\x74"], $p2["\x6c\141\164"])) { goto Ezua7; } goto Jj8ae; A3jEc: $xinters = ($p["\154\x61\x74"] - $p1["\154\141\x74"]) * ($p2["\154\156\147"] - $p1["\x6c\156\147"]) / ($p2["\x6c\141\x74"] - $p1["\154\x61\164"]) + $p1["\x6c\x6e\147"]; goto mNd5n; rkHOb: wXk6x: goto VwI8y; y2GWg: OaGfD: goto gQdVu; rTowm: $p3 = $pts[($i + 1) % $N]; goto vUg_M; aM_0K: goto eSwmb; goto EjPQ8; GUaom: goto Jop9L; goto PK0wl; osSBl: goto ozyhK; goto Q4Iow; WLgC7: return $boundOrVertex; goto BFur5; NVVUQ: Jop9L: goto EIj7F; iKxCy: $intersectCount = 0; goto TGuds; Q4Iow: lPqsJ: goto quHH6; YGfs3: ++$intersectCount; goto rkHOb; E4qNU: TNCGf: goto H15ci; kFTwB: hGTmm: goto JdTgw; SBxwC: WTSL8: goto EN3X6; xjORQ: if (!($p["\x6c\x6e\147"] == $p1["\154\x6e\147"] && $p["\154\x61\164"] == $p1["\x6c\x61\164"])) { goto DjZnF; } goto WLgC7; gQdVu: if ($p1["\154\x6e\147"] == $p2["\154\x6e\147"]) { goto TNCGf; } goto A3jEc; SVPSh: $boundOrVertex = true; goto iKxCy; KGH0o: $p2 = $pts[$i % $N]; goto vWpOM; VNmdK: xIwSv: goto yefjU; npv_D: $p1 = $p2; goto f2uEn; L7bxH: if (!($i <= $N)) { goto xIwSv; } goto xjORQ; Jj8ae: if (!($p["\154\141\164"] == $p2["\154\x61\x74"] && $p["\x6c\156\147"] <= $p2["\154\156\x67"])) { goto NLWiE; } goto rTowm; VnErT: if (!($p1["\x6c\141\164"] == $p2["\154\141\x74"] && $p["\154\x6e\147"] >= min($p1["\154\x6e\147"], $p2["\x6c\156\x67"]))) { goto OaGfD; } goto uWvHh; vWpOM: if (!($p["\x6c\x61\164"] < min($p1["\x6c\x61\164"], $p2["\154\x61\164"]) || $p["\154\141\x74"] > max($p1["\x6c\141\x74"], $p2["\x6c\141\x74"]))) { goto vxOBR; } goto zs9kp; EN3X6: return false; goto fM1t5; dJvod: $intersectCount += 2; goto GUaom; Eey6N: return $boundOrVertex; goto jCFgc; J7KzV: ++$i; goto fi6U0; vUg_M: if ($p["\x6c\141\x74"] >= min($p1["\x6c\141\164"], $p3["\x6c\x61\x74"]) && $p["\154\x61\x74"] <= max($p1["\154\x61\164"], $p3["\154\141\164"])) { goto H0pph; } goto dJvod; TGuds: $precision = 2.0E-10; goto ZpQsF; BFur5: DjZnF: goto KGH0o; LzDHo: $p2 = 0; goto oye3k; H15ci: if ($p1["\154\156\147"] == $p["\154\x6e\147"]) { goto lPqsJ; } goto ISqxS; Nd9fD: jA5j2: goto L7bxH; ISqxS: ++$intersectCount; goto osSBl; quHH6: return $boundOrVertex; goto sFu_b; uWvHh: return $boundOrVertex; goto y2GWg; sFu_b: ozyhK: goto p6arw; TnkAO: $N = count($pts); goto SVPSh; oye3k: $p = $point; goto Ll3c3; O5Oqf: goto dbhDo; goto tv9Rl; mNd5n: if (!(abs($p["\x6c\156\147"] - $xinters) < $precision)) { goto vpusR; } goto Eey6N; p6arw: ga1aD: goto kFTwB; fM1t5: n8HlP: goto QGGSt; f2uEn: eSwmb: goto J7KzV; yefjU: if ($intersectCount % 2 == 0) { goto WTSL8; } goto QuKu0; XXUhI: if (!($p["\x6c\x6e\147"] <= max($p1["\x6c\x6e\147"], $p2["\154\x6e\x67"]))) { goto hGTmm; } goto VnErT; VwI8y: goto ga1aD; goto E4qNU; fi6U0: goto jA5j2; goto VNmdK; QuKu0: return true; goto OaYOL; EjPQ8: vxOBR: goto LVpM9; ZpQsF: $p1 = 0; goto LzDHo; EIj7F: NLWiE: goto O5Oqf; mIUc3: $i = 1; goto Nd9fD; jCFgc: vpusR: goto m0Hvp; Ll3c3: $p1 = $pts[0]; goto mIUc3; PK0wl: H0pph: goto kb_Wa; tv9Rl: Ezua7: goto XXUhI; JdTgw: dbhDo: goto npv_D; kb_Wa: ++$intersectCount; goto NVVUQ; zs9kp: $p1 = $p2; goto aM_0K; QGGSt: } public static function Convert_BD09_To_GCJ02($lat, $lng) { goto suRA4; tIrKZ: $y = $lat - 0.006; goto hKDt8; g3i40: $x = $lng - 0.0065; goto tIrKZ; jG_Qk: $theta = atan2($y, $x) - 3.0E-6 * cos($x * $x_pi); goto BPk2m; hKDt8: $z = sqrt($x * $x + $y * $y) - 2.0E-5 * sin($y * $x_pi); goto jG_Qk; BPk2m: $lng = $z * cos($theta); goto JTZWK; suRA4: $x_pi = 3.141592653589793 * 3000.0 / 180.0; goto g3i40; JTZWK: $lat = $z * sin($theta); goto it6ny; it6ny: return array("\154\156\147" => $lng, "\x6c\141\164" => $lat); goto mhqCH; mhqCH: } public static function get_credit_titles() { goto rVFN0; rVFN0: global $_W; goto YeUrh; f6ZD4: if (!($uni_settings && $uni_settings["\143\162\145\144\151\x74\x6e\x61\x6d\145\163"])) { goto fjmZA; } goto M6V7G; YeUrh: $credit_title = array(); goto tGjp8; gUhGL: u9ekZ: goto Pq9kG; RUM99: if (!$creditnames) { goto nCFEd; } goto jGdo4; jGdo4: foreach ($creditnames as $k => $val) { goto prPTs; Zmz3d: $credit_title[$k] = $val["\x74\x69\164\154\x65"]; goto zlciY; zlciY: wxUCa: goto wnjCR; wnjCR: nF9UZ: goto lvisI; prPTs: if (!$val["\x65\x6e\141\x62\154\x65\x64"]) { goto wxUCa; } goto Zmz3d; lvisI: } goto gUhGL; X6VnK: return $credit_title["\x63\x72\x65\x64\x69\164\61"] ? $credit_title["\x63\x72\x65\x64\x69\164\61"] : "\xe7\xa7\xaf\345\x88\206"; goto a1b4p; Pq9kG: nCFEd: goto NuBOP; tGjp8: $uni_settings = uni_setting($_W["\165\156\x69\141\143\151\144"]); goto f6ZD4; M6V7G: $creditnames = iunserializer($uni_settings["\x63\162\145\x64\x69\164\x6e\141\155\x65\x73"]); goto RUM99; NuBOP: fjmZA: goto X6VnK; a1b4p: } public static function send_subscribe_tmplmsg($openid, $template_id, $page = '', $data) { goto EQspM; vkzm9: $token = $account_api->getAccessToken(); goto rK_GP; B_9Zf: $post_url = "\150\x74\x74\x70\x73\72\57\57\141\160\151\56\x77\145\151\x78\x69\x6e\x2e\x71\x71\x2e\143\157\x6d\57\143\147\151\55\142\x69\x6e\57\x6d\x65\163\163\141\x67\145\x2f\163\165\x62\163\x63\x72\151\x62\145\x2f\163\x65\156\144\x3f\x61\143\x63\x65\163\x73\137\164\157\153\145\x6e\x3d" . $token; goto B9SMY; kYtgf: eKPlO: goto wcvhE; rK_GP: $post = array("\x74\x6f\165\163\x65\x72" => $openid, "\x74\x65\x6d\x70\154\x61\164\145\x5f\151\x64" => $template_id, "\160\141\x67\x65" => $page, "\x64\x61\164\x61" => $data); goto B_9Zf; J3eoo: return false; goto kYtgf; qXvLb: return false; goto xF5LN; wAofK: WeUtility::logging("\x66\141\x74\141\x6c", "\133\163\145\x6e\x64\137\x73\x75\x62\x73\x63\162\x69\142\x65\x5f\164\155\160\154\x6d\x73\x67\x5d\x20\xe8\xae\xa2\xe9\230\x85\xe6\xb6\210\xe6\x81\xaf\xe5\x8f\221\xe9\200\x81\345\244\xb1\xe8\xb4\245\xef\274\232\345\217\202\346\225\260\346\x9c\211\xe8\257\257"); goto J3eoo; jbSgH: return true; goto ilR2A; v34Ak: WeUtility::logging("\151\x6e\146\157", "\350\xae\xa2\351\230\x85\346\xb6\x88\346\x81\xaf\xe5\x8f\221\xe9\200\x81\xe5\244\261\350\xb4\245\x3a\x20\162\145\x73\165\x6c\164\75" . var_export($result, true) . "\54\40\160\x6f\163\x74\x3d" . var_export($post, true)); goto qXvLb; hNzcW: $result = @json_decode($response["\x63\x6f\x6e\x74\145\156\x74"], true); goto pjh4Y; B9SMY: $response = ihttp_request($post_url, json_encode($post)); goto hNzcW; EQspM: if (!(empty($openid) || empty($template_id) || empty($data))) { goto eKPlO; } goto wAofK; pjh4Y: if (!(is_error($result) || $result["\145\x72\x72\x63\157\x64\x65"] > 0)) { goto M3Jt3; } goto v34Ak; xF5LN: M3Jt3: goto jbSgH; wcvhE: $account_api = WeAccount::create(); goto vkzm9; ilR2A: } public static function getToMedia($imgs) { goto vlk6P; QZ00V: foreach ($imgs as $img) { $data[] = tomedia($img); y6_ct: } goto qipD7; F7PZu: return $data; goto mNTgg; vlk6P: $data = array(); goto LBjpW; H2Si9: return $data; goto BHq0g; MOedP: W7MzU: goto QZ00V; LBjpW: if ($imgs) { goto r3stm; } goto F7PZu; qipD7: BoArR: goto H2Si9; VoTzS: if (!is_serialized($imgs)) { goto W7MzU; } goto xdM67; xdM67: $imgs = iunserializer($imgs); goto MOedP; mNTgg: r3stm: goto VoTzS; BHq0g: } }